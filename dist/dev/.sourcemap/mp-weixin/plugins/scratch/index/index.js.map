{"version":3,"sources":["webpack:///./src/plugins/scratch/index/index.vue?c636","webpack:///./src/plugins/scratch/index/index.vue?4c46","webpack:///./src/plugins/scratch/index/index.vue?7f4f","webpack:///./src/plugins/scratch/index/index.vue?246a","webpack:///./src/plugins/scratch/index/index.vue","webpack:///./src/plugins/scratch/index/index.vue?85ad"],"names":["__webpack_require__","r","__webpack_exports__","_index_vue_vue_type_template_id_2cdd31f0_scoped_true_filter_modules_7B_7D___WEBPACK_IMPORTED_MODULE_0__","_index_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_1__","__WEBPACK_IMPORT_KEY__","key","d","_node_modules_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_3__","component","Object","options","__file","_node_modules_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_15_0_node_modules_dcloudio_webpack_uni_mp_loader_lib_template_js_node_modules_vue_loader_lib_index_js_vue_loader_options_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_custom_block_loader_index_js_ref_0_1_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_index_vue_vue_type_template_id_2cdd31f0_scoped_true_filter_modules_7B_7D___WEBPACK_IMPORTED_MODULE_0__","render","staticRenderFns","_h","this","$createElement","_self","_c","_withStripped","_node_modules_babel_loader_lib_index_js_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_12_1_node_modules_dcloudio_webpack_uni_mp_loader_lib_script_js_node_modules_vue_loader_lib_index_js_vue_loader_options_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_custom_block_loader_index_js_ref_0_1_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_index_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__","_node_modules_babel_loader_lib_index_js_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_12_1_node_modules_dcloudio_webpack_uni_mp_loader_lib_script_js_node_modules_vue_loader_lib_index_js_vue_loader_options_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_custom_block_loader_index_js_ref_0_1_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_index_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0___default","n","name","components","appShareQrCodePoster","computed","_objectSpread","mapState","appImg","state","mallConfig","plugin","scratch","app_image","userInfo","user","info","data","ctx","interval","minX","minY","maxX","maxY","lastX","lastY","logs","setting","list","oppty","msg","is_start","is_award","is_name","extra_list","touch_end","poster","$api","poster_status","shareShow","userLoginShow","is_integral","watch","val","oldVal","init","onUnload","clearInterval","onHide","onLoad","$commonLoad","onload","wx","showShareMenu","withShareTicket","menus","onShareTimeline","$shareTimeline","title","$children","navigationBarTitle","query","onShow","self","$showLoading","$request","url","index","then","$hideLoading","_ref","code","deplete_integral_num","uni","showToast","icon","prizeList","setInterval","onShareAppMessage","$shareAppMessage","path","params","methods","hShareAppMessage","s","arguments","length","undefined","register","share","home","redirectTo","prize","navigateTo","rules","concat","encodeURIComponent","JSON","stringify","record","onStart","_ref2","_ref3","setTimeout","createSelectorQuery","select","boundingClientRect","exec","res","canvasWidth","width","canvasHeight","height","_ref4","_ref5","createCanvasContext","drawImage","draw","e","drawRect","x","y","x1","y1","_ref6","_ref7","clearArc","stepClear","calcWidth","calcHeight","Math","sqrt","posX","posY","widthX","heightY","clearRect","touchStart","$store","dispatch","touchMove","touches","touchEnd","receive","id","_ref8","_ref9","type","content","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_8_oneOf_1_1_node_modules_css_loader_index_js_ref_8_oneOf_1_2_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_3_node_modules_sass_loader_dist_cjs_js_ref_8_oneOf_1_4_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_8_oneOf_1_5_node_modules_vue_loader_lib_index_js_vue_loader_options_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_custom_block_loader_index_js_ref_0_1_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_index_vue_vue_type_style_index_0_id_2cdd31f0_scoped_true_lang_scss___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_8_oneOf_1_1_node_modules_css_loader_index_js_ref_8_oneOf_1_2_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_3_node_modules_sass_loader_dist_cjs_js_ref_8_oneOf_1_4_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_8_oneOf_1_5_node_modules_vue_loader_lib_index_js_vue_loader_options_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_custom_block_loader_index_js_ref_0_1_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_index_vue_vue_type_style_index_0_id_2cdd31f0_scoped_true_lang_scss___WEBPACK_IMPORTED_MODULE_0___default"],"mappings":"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","file":"plugins/scratch/index/index.js","sourcesContent":["import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=2cdd31f0&scoped=true&filter-modules=%7B%7D&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=2cdd31f0&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2cdd31f0\",\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/Users/liushibo/project/outsourceProject/jiuhejiang/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('2cdd31f0')) {\n      api.createRecord('2cdd31f0', component.options)\n    } else {\n      api.reload('2cdd31f0', component.options)\n    }\n    module.hot.accept(\"./index.vue?vue&type=template&id=2cdd31f0&scoped=true&filter-modules=%7B%7D&\", function () {\n      api.rerender('2cdd31f0', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"src/plugins/scratch/index/index.vue\"\nexport default component.exports","export * from \"-!../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--15-0!../../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=template&id=2cdd31f0&scoped=true&filter-modules=%7B%7D&\"","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport appShareQrCodePoster from '../../../components/page-component/app-share-qr-code-poster/app-share-qr-code-poster';\nimport {mapState} from 'vuex';\n\nexport default {\n    name: \"index\",\n    components: {appShareQrCodePoster},\n    computed: {\n        ...mapState({\n            appImg: state => state.mallConfig.plugin.scratch.app_image,\n            userInfo: state => state.user.info,\n        }),\n    },\n    data() {\n        let ctx, interval, minX, minY, maxX, maxY, lastX, lastY;\n        return {\n            ctx,\n            interval,\n            minX,\n            minY,\n            maxX,\n            maxY,\n            lastX,\n            lastY,\n            logs: [],\n                setting: {},\n                list: null,\n                oppty: 0,\n                msg: '', //错误信息\n                is_start: true,\n                is_award: false,\n                is_name: false,\n                extra_list: null,\n                touch_end: true,\n                poster: this.$api.scratch.poster,\n                poster_status: false, //hide model\n                shareShow: false,\n                userLoginShow: false,\n                r: 16,\n                is_integral: false,\n            }\n        },\n        watch: {\n            shareShow(val, oldVal) {\n                if (val === false && oldVal === true) {\n                    this.init();\n                }\n            }\n        },\n        onUnload () {\n            clearInterval(this.interval);\n        },\n        onHide () {\n            clearInterval(this.interval);\n        },\n\n        onLoad(options) { this.$commonLoad.onload(options);\n            wx.showShareMenu({\n                withShareTicket: true,\n                menus: ['shareAppMessage', 'shareTimeline']\n            })\n        },\n        onShareTimeline() {\n            return this.$shareTimeline({\n                title: this.$children[0].navigationBarTitle,\n                query: {}\n            });\n        },\n\n        onShow() {\n            const self = this;\n            self.$showLoading({title: '加载中'});\n            self.$request({\n                url: self.$api.scratch.index,\n            }).then(info => {\n                self.$hideLoading();\n                self.is_award = false;\n                if (info.data) {\n                    [self.msg, self.setting, self.oppty, self.list] = [info.code === 1 ? info.msg : '', info.data.setting, info.data.oppty, info.data.list];\n                    self.is_integral = self.setting.deplete_integral_num > 0;\n                } else {\n                    uni.showToast({'title': info.msg, icon: 'none'});\n                }\n                self.init();\n            });\n\n            self.prizeList();\n            self.interval = setInterval(() => {\n                self.prizeList();\n            }, 10000)\n        },\n\n\n        onShareAppMessage() {\n            return this.$shareAppMessage({\n                title: this.$children[0].navigationBarTitle,\n                path: '/plugins/scratch/index/index',\n                params: {}\n            });\n        },\n\n        methods: {\n            hShareAppMessage(s = false){\n                return this.$shareAppMessage({\n                    title: this.$children[0].navigationBarTitle,\n                    path: '/plugins/scratch/index/index',\n                    params: {}\n                }, s);\n            },\n            register() {\n                if (this.msg) {\n                    uni.showToast({icon: `none`, title: this.msg});\n                    return;\n                }\n                this.is_integral = false;\n                this.init();\n            },\n\n            share() {\n                this.shareShow = true;\n            },\n            home() {\n                uni.redirectTo({url: `/pages/index/index`});\n            },\n            prize() {\n                uni.navigateTo({url: `/plugins/scratch/prize/prize`});\n            },\n            rules() {\n                // uni.navigateTo({url: `/plugins/scratch/rule/rule`});\n                uni.navigateTo({\n                    url: `/pages/rules/index?url=${encodeURIComponent(this.$api.scratch.setting)}&keys=${JSON.stringify(['setting', 'rule'])}`,\n                });\n            },\n\n            prizeList() {\n                const self = this;\n                self.$request({\n                    url: self.$api.scratch.record,\n                }).then(info => {\n                    if (info.code === 0) {\n                        self.logs = info.data;\n                    }\n                })\n            },\n\n            onStart() {\n                this.init();\n                [this.is_integral, this.list, this.is_award] = [this.setting.deplete_integral_num > 0, this.extra_list, false];\n            },\n\n            init() {\n                const self = this;\n                [self.is_start, self.is_name] = [true, false];\n\n                //Promise\n                setTimeout(() => {\n                    let query = uni.createSelectorQuery();\n                    query.select('#frame').boundingClientRect();\n                    query.exec((res) => {\n                        const canvasWidth = res[0].width;\n                        const canvasHeight = res[0].height;\n                        let imageResource = './../image/scratch_hide.png';\n                        [self.lastX, self.lastY, self.minX, self.minY, self.maxX, self.maxY] = ['', '', '', '', '', ''];\n                        [self.r, self.canvasWidth, self.canvasHeight] = [16, canvasWidth, canvasHeight]\n\n                        let ctx = uni.createCanvasContext('scratch');\n                        ctx.drawImage(imageResource, 0, 0, canvasWidth, canvasHeight);\n                        self.ctx = ctx;\n                        ctx.draw(true, (e) => {\n                            self.is_name = true;\n                        })\n                    })\n                })\n            },\n\n            //\n            drawRect(x, y) {\n                const self = this;\n                const r = self.r / 2;\n                const x1 = x - r > 0 ? x - r : 0\n                const y1 = y - r > 0 ? y - r : 0\n                if ('' !== self.minX) {\n                    self.minX = self.minX > x1 ? x1 : self.minX;\n                    self.minY = self.minY > y1 ? y1 : self.minY;\n                    self.maxX = self.maxX > x1 ? self.maxX : x1;\n                    self.maxY = self.maxY > y1 ? self.maxY : y1;\n                } else {\n                    [self.minX, self.minY, self.maxX, self.maxY] = [x1, y1, x1, y1];\n                }\n                [self.lastX, self.lastY] = [x1, y1];\n                return [x1, y1, 2 * r]\n            },\n\n            // 绘图\n            clearArc(x, y, stepClear) {\n                let r = this.r;\n                let ctx = this.ctx;\n                let calcWidth = r - stepClear;\n                let calcHeight = Math.sqrt(r * r - calcWidth * calcWidth);\n                let posX = x - calcWidth;\n                let posY = y - calcHeight;\n                let widthX = 2 * calcWidth;\n                let heightY = 2 * calcHeight;\n                if (stepClear <= r) {\n                    ctx.clearRect(posX, posY, widthX, heightY);\n                    stepClear += 2;\n                    this.clearArc(x, y, stepClear);\n                }\n            },\n\n            //action\n            touchStart(e) {\n                const self = this;\n                if (self.msg === 'User ID不能为空。') {\n                    this.userLoginShow = true;\n                    self.$store.dispatch('user/info');\n                } else if (self.msg) {\n                    uni.showToast({icon: 'none', title: self.msg})\n                }\n            },\n\n            touchMove(e) {\n                if (!this.is_start || this.msg) return;\n                let stepClear = 2;\n                this.drawRect(e.touches[0].x, e.touches[0].y)\n                this.clearArc(e.touches[0].x, e.touches[0].y, stepClear)\n                this.ctx.draw(true)\n            },\n\n            touchEnd(e) {\n                const self = this;\n                if (!self.is_start || self.msg) return;\n                //自动清楚采用点范围值方式判断\n                let canvasWidth = self.canvasWidth;\n                let canvasHeight = self.canvasHeight;\n                let minX = self.minX;\n                let minY = self.minY;\n                let maxX = self.maxX;\n                let maxY = self.maxY;\n                if (maxX - minX > .4 * canvasWidth && maxY - minY > .4 * canvasHeight && self.touch_end) {\n                    self.touch_end = false;\n\n                    self.$request({\n                        url: self.$api.scratch.receive,\n                        data: {\n                            id: self.list.id\n                        }\n                    }).then(info => {\n                        if (info.code === 0) {\n                            self.ctx.draw();\n                            [self.msg, self.setting, self.oppty, self.extra_list] = [info.msg, info.data.setting, info.data.oppty, info.data.list];\n                            [self.is_start, self.is_award] = [false, self.list.type != 5];\n                        } else {\n                            uni.showToast({icon: 'none', content: info.msg});\n                            self.onStart();\n                        }\n                        self.touch_end = true;\n                    });\n                }\n            },\n        }\n    }\n","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-1!../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-2!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&id=2cdd31f0&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-1!../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-2!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&id=2cdd31f0&scoped=true&lang=scss&\""],"sourceRoot":""}