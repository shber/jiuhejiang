{"version":3,"sources":["webpack:///./src/plugins/scan_code/index/index.vue?3078","webpack:///./src/plugins/scan_code/index/index.vue?68b1","webpack:///./src/plugins/scan_code/index/index.vue?d20f","webpack:///./src/plugins/scan_code/index/index.vue?1a03","webpack:///./src/plugins/scan_code/index/index.vue","webpack:///./src/plugins/scan_code/index/index.vue?9a81"],"names":["__webpack_require__","r","__webpack_exports__","_index_vue_vue_type_template_id_48d6647d_scoped_true_filter_modules_7B_7D___WEBPACK_IMPORTED_MODULE_0__","_index_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_1__","__WEBPACK_IMPORT_KEY__","key","d","_node_modules_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_3__","component","Object","options","__file","_node_modules_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_15_0_node_modules_dcloudio_webpack_uni_mp_loader_lib_template_js_node_modules_vue_loader_lib_index_js_vue_loader_options_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_custom_block_loader_index_js_ref_0_1_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_index_vue_vue_type_template_id_48d6647d_scoped_true_filter_modules_7B_7D___WEBPACK_IMPORTED_MODULE_0__","render","staticRenderFns","_h","this","$createElement","_self","_c","_withStripped","_node_modules_babel_loader_lib_index_js_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_12_1_node_modules_dcloudio_webpack_uni_mp_loader_lib_script_js_node_modules_vue_loader_lib_index_js_vue_loader_options_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_custom_block_loader_index_js_ref_0_1_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_index_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__","_node_modules_babel_loader_lib_index_js_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_12_1_node_modules_dcloudio_webpack_uni_mp_loader_lib_script_js_node_modules_vue_loader_lib_index_js_vue_loader_options_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_custom_block_loader_index_js_ref_0_1_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_index_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0___default","n","name","components","data","page_loading","tmp_price","clerk_user_id","edit_status","price_modal","activity","remark","integral","user_integral_num","list","price","pay_price","use_integral","activity_id","coupon_id","can_coupon_num","integral_explain","clear","onShow","userCoupon","$store","state","scanCode","id","calcPrice","_ref","onLoad","$commonLoad","onload","self","commit","_ref2","$showLoading","text","$request","url","$api","scan_code_pay","index","then","info","$hideLoading","code","_ref3","goods","setting","catch","methods","openPriceModel","closePriceModel","setTempInput","e","money","detail","value","val","num","toString","indexOf","replace","parseFloat","priceChange","preview","method","_ref4","uni","showToast","icon","title","msg","handleUseIntegral","bindTextBlur","getIntegralInfo","content","map","v","consume_money","integral_deduction","showModal","trim","showCancel","setCoupon","navigateTo","submit","$payment","pay","pay_id","payMsg","success","cancel","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_8_oneOf_1_1_node_modules_css_loader_index_js_ref_8_oneOf_1_2_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_3_node_modules_sass_loader_dist_cjs_js_ref_8_oneOf_1_4_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_8_oneOf_1_5_node_modules_vue_loader_lib_index_js_vue_loader_options_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_custom_block_loader_index_js_ref_0_1_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_index_vue_vue_type_style_index_0_id_48d6647d_scoped_true_lang_scss___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_8_oneOf_1_1_node_modules_css_loader_index_js_ref_8_oneOf_1_2_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_3_node_modules_sass_loader_dist_cjs_js_ref_8_oneOf_1_4_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_8_oneOf_1_5_node_modules_vue_loader_lib_index_js_vue_loader_options_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_custom_block_loader_index_js_ref_0_1_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_index_vue_vue_type_style_index_0_id_48d6647d_scoped_true_lang_scss___WEBPACK_IMPORTED_MODULE_0___default"],"mappings":"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","file":"plugins/scan_code/index/index.js","sourcesContent":["import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=48d6647d&scoped=true&filter-modules=%7B%7D&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=48d6647d&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"48d6647d\",\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/Users/liushibo/project/outsourceProject/jiuhejiang/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('48d6647d')) {\n      api.createRecord('48d6647d', component.options)\n    } else {\n      api.reload('48d6647d', component.options)\n    }\n    module.hot.accept(\"./index.vue?vue&type=template&id=48d6647d&scoped=true&filter-modules=%7B%7D&\", function () {\n      api.rerender('48d6647d', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"src/plugins/scan_code/index/index.vue\"\nexport default component.exports","export * from \"-!../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--15-0!../../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=template&id=48d6647d&scoped=true&filter-modules=%7B%7D&\"","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nexport default {\n    name: \"index\",\n    components: {},\n    data() {\n        return {\n            page_loading: true,\n            tmp_price: '',\n            clerk_user_id: 0,\n            edit_status: true,\n            price_modal: false,\n            activity: {},\n            remark: '',\n            integral: {\n                user_integral_num: '0',\n            },\n            list: {\n                price: '',\n                pay_price: 0.00,\n                use_integral: 0,\n                activity_id: 0,\n                coupon_id: 0,\n                can_coupon_num: 0,\n                integral_explain: [],\n            },\n            clear: false,\n        }\n    },\n    onShow: function () {\n        const self = this;\n        const userCoupon = self.$store.state.scanCode.userCoupon;\n        if (userCoupon) {\n            if (userCoupon == -1) {\n                self.list.coupon_id = 0\n            } else {\n                self.list.coupon_id = userCoupon.id;\n            }\n            self.calcPrice();\n        } else {\n            self.list.coupon_id = 0\n        }\n        if (self.clear) {\n            [\n                self.edit_status,\n                self.clear,\n                self.remark,\n                self.tmp_price,\n                self.list,\n            ] = [\n                true,\n                false,\n                '',\n                '',\n                {\n                    price: '',\n                    pay_price: 0.00,\n                    use_integral: 0,\n                    activity_id: 0,\n                    coupon_id: 0,\n                    can_coupon_num: 0,\n                    integral_explain: [],\n                }\n            ]\n        }\n    },\n\n    onLoad(options) { this.$commonLoad.onload(options);\n        const self = this;\n        self.$store.commit('scanCode/mutSetUserCoupon', 0);\n        self.clear = true;\n\n        if (options.clerk_user_id) {\n            self.clerk_user_id = options.clerk_user_id;\n        }\n\n        if (options.price) {\n            [self.edit_status, self.tmp_price,] = [false, options.price];\n            self.calcPrice();\n        }\n\n        self.$showLoading({text: '加载中'});\n        self.$request({\n            url: self.$api.scan_code_pay.index\n        }).then(info => {\n            self.$hideLoading();\n            if (info.code === 0) {\n                [\n                    self.activity,\n                    self.goods,\n                    self.integral,\n                    self.setting\n                ] = [\n                    info.data.activity  ? info.data.activity : {},\n                    info.data.goods,\n                    info.data.integral,\n                    info.data.setting\n                ];\n            }\n        }).catch(info => {\n            self.$hideLoading();\n        })\n    },\n    methods: {\n        openPriceModel() {\n            if (!this.edit_status) return;\n            this.price_modal = true;\n        },\n        closePriceModel() {\n            this.price_modal = false;\n        },\n        setTempInput: function (e) {\n            this.tmp_price = this.money(e.detail.value);\n        },\n        money(val) {\n          let num = val.toString(); //先转换成字符串类型\n          if (num.indexOf('.') == 0) { //第一位就是 .\n            num = '0' + num\n          }\n          num = num.replace(/[^\\d.]/g, \"\");  //清除“数字”和“.”以外的字符\n          num = num.replace(/\\.{2,}/g, \".\"); //只保留第一个. 清除多余的\n          num = num.replace(\".\", \"$#$\").replace(/\\./g, \"\").replace(\"$#$\", \".\");\n          num = num.replace(/^(\\-)*(\\d+)\\.(\\d\\d).*$/, '$1$2.$3'); //只能输入两个小数\n          if (num.indexOf(\".\") < 0 && num != \"\") {\n            num = parseFloat(num);\n          }\n\n          return +num\n        },\n        priceChange() {\n            if (this.tmp_price > 100000) {\n                this.tmp_price = 100000.00;\n            }\n        },\n        //总价\n        calcPrice: function () {\n            const self = this;\n            self.priceChange();\n            self.price_modal = false;\n            self.$showLoading({text: '加载中'});\n\n            self.$request({\n                url: self.$api.scan_code_pay.preview,\n                data: {\n                    price: self.tmp_price,\n                    coupon_id: self.list.coupon_id,\n                    use_integral: self.list.use_integral,\n                    clerk_user_id: self.clerk_user_id\n                },\n                method: 'POST',\n            }).then(info => {\n                self.$hideLoading();\n                if (info.code === 0) {\n                    [self.list, self.tmp_price] = [info.data, info.data.price];\n                } else {\n                    uni.showToast({icon: 'none', title: info.msg});\n                }\n            }).catch(info => {\n                self.$hideLoading();\n            })\n        },\n\n        //UseIntegral\n        handleUseIntegral() {\n            const self = this;\n            let list = self.list;\n            list.use_integral = list.use_integral == 1 ? 0 : 1;\n            self.calcPrice();\n        },\n\n        //Remark\n        bindTextBlur: function (e) {\n            this.remark = e.detail.value;\n        },\n\n        //Integral\n        getIntegralInfo: function (e) {\n            let content = '';\n            this.list.integral_explain.map(v => {\n                content += '消费满' + v.consume_money + '元，';\n                content += '积分最多可抵' + v.integral_deduction + '元';\n                content += '\\r\\n';\n            });\n            uni.showModal({\n                title: '积分抵扣说明',\n                content: content.trim(),\n                showCancel: false\n            })\n        },\n\n        //navigate\n        setCoupon: function (e) {\n            this.clear = false;\n            uni.navigateTo({\n                url: '/plugins/scan_code/index/coupon?price=' + this.list.price + '&coupon_id=' + this.list.coupon_id,\n            });\n        },\n\n        submit: function (e) {\n            const self = this;\n            if (!self.list.price) return\n\n            self.$showLoading({text: '正在提交'});\n            self.$request({\n                url: self.$api.scan_code_pay.submit,\n                method: 'post',\n                data: {\n                    price: self.list.price,\n                    coupon_id: self.list.coupon_id,\n                    use_integral: self.list.use_integral,\n                    remark: self.remark,\n                    clerk_user_id: self.clerk_user_id\n                },\n            }).then(e => {\n                self.$hideLoading();\n                if (e.code === 0) {\n                    self.$payment.pay(e.data.pay_id).then(payMsg => {\n                        self.$store.commit('scanCode/mutSetUserCoupon', '');\n                        // 支付成功\n                        uni.showModal({\n                            title: '提示',\n                            content: \"支付成功\",\n                            showCancel: false,\n                            success() {\n                                uni.navigateTo({\n                                    url: '/pages/order-submit/pay-result?payment_order_union_id=' + e.data.pay_id + '&plugin=scan_code_pay'\n                                })\n                                self.clear = true;\n                            },\n                        });\n                    }).catch(payMsg => {\n                        // 支付失败\n                        self.$showLoading({text: '取消中'});\n                        self.$request({\n                            url: self.$api.scan_code_pay.cancel,\n                            data: {\n                                pay_id: e.data.pay_id,\n                            },\n                            method: 'POST',\n                        }).then(info => {\n                            self.$hideLoading();\n                        }).catch(info => {\n                            self.$hideLoading();\n                            uni.showModal({title: '提示', content: info.msg});\n                        })\n                    });\n                } else {\n                    uni.showModal({title: '提示', content: info.msg});\n                }\n            }).catch(e => {\n                self.$hideLoading();\n            });\n        }\n    }\n}\n","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-1!../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-2!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&id=48d6647d&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-1!../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-2!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&id=48d6647d&scoped=true&lang=scss&\""],"sourceRoot":""}