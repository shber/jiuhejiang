{"version":3,"sources":["webpack:///external \"../siteinfo.js\"","webpack:///./src/pages/order-submit/order-submit.vue?b602","webpack:///./src/pages/order-submit/order-submit.vue?fec9","webpack:///./src/pages/order-submit/order-submit.vue?c5db","webpack:///./src/pages/order-submit/order-submit.vue?9acb","webpack:///./src/pages/order-submit/order-submit.vue","webpack:///./src/pages/order-submit/order-submit.vue?5dc1"],"names":["module","exports","require","__webpack_require__","r","__webpack_exports__","_order_submit_vue_vue_type_template_id_48e83c8a_scoped_true_filter_modules_7B_7D___WEBPACK_IMPORTED_MODULE_0__","_order_submit_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_1__","__WEBPACK_IMPORT_KEY__","key","d","_node_modules_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_3__","component","Object","options","__file","_node_modules_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_15_0_node_modules_dcloudio_webpack_uni_mp_loader_lib_template_js_node_modules_vue_loader_lib_index_js_vue_loader_options_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_custom_block_loader_index_js_ref_0_1_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_order_submit_vue_vue_type_template_id_48e83c8a_scoped_true_filter_modules_7B_7D___WEBPACK_IMPORTED_MODULE_0__","render","staticRenderFns","_vm","this","_h","$createElement","l0","_self","_c","__map","previewData","mch_list","mch","mchIndex","m0","noCouponStatus","$orig","__get_orig","$mp","data","assign","$root","_withStripped","_node_modules_babel_loader_lib_index_js_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_12_1_node_modules_dcloudio_webpack_uni_mp_loader_lib_script_js_node_modules_vue_loader_lib_index_js_vue_loader_options_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_custom_block_loader_index_js_ref_0_1_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_order_submit_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__","_node_modules_babel_loader_lib_index_js_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_12_1_node_modules_dcloudio_webpack_uni_mp_loader_lib_script_js_node_modules_vue_loader_lib_index_js_vue_loader_options_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_custom_block_loader_index_js_ref_0_1_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_order_submit_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0___default","n","_vuex","name","components","AppSubmitCheckbox","AppAddressBar","AppBottomModal","AppCouponPick","AppDiyForm","appSubmitGoods","AppClose","totalTitle","check","total_price","vip_card_discount_total_price","custom_currency_all","getLocationFail","previewUrl","submitUrl","plugin","orderPageUrl","submitLock","getPayDataTimer","userTheme","is_gift","payDataUrl","showPayResult","payCancelUrl","loadingPreviewData","showClose","is_open","mchList","p_pay_id","computed","_objectSpread","mapState","appImg","state","mallConfig","__wxapp_img","theme","getTheme","mapGetters","themeBgClass","indexOf","concat","themeTextClass","onLoad","_this","$commonLoad","onload","JSON","parse","list","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","next","done","item","value","mch_id","push","err","return","length","stringify","setFormData","$event","on","$const","EVENT_USER_LOGIN","then","loadPreviewData","onShow","_this2","setTimeout","onUnload","clearTimeout","watch","previewData.address.name","handler","changeZitiAddress","previewData.address.mobile","methods","getMall","e","console","log","$store","getters","navigateVipCardPrivilege","uni","navigateTo","url","showCouponPicker","index","reversalShowInsertRows","showInsertRows","updateList","$forceUpdate","setParams","total_title","handleOrderFormInput","_ref","sign","result","i","label","required","is_required","formData","orderSubmit","order_form","commit","handleOrderFormValidate","_ref2","order_form_validate_result","decodeURIComponent","preview_url","$api","order","preview","submit_url","submit","order_page_url","pay_data_url","pay_data","pay_cancel_url","show_pay_result","parseInt","_mchItem","splice","unshift","j","distance","remark","use_integral","user_coupon_id","goods_list","cart_id","store_id","bookStorage","address_id","send_type","type","arguments","$storage","getStorageSync","setStorageSync","_this3","showLoading","mask","title","$request","method","form_data","response","hideLoading","code","allZiti","address","mobile","noCoupons","setDiyFormScrollStatus","checkCouponError","updateStoreDistance","updateGoodsCount","showModal","content","msg","showCancel","success","navigateBack","catch","navigateStore","id","firstGoodsId","navigateCoupon","navigateSvip","changeSendType","delivery","_this4","has_ziti","getLocation","res","store","latitude","longitude","isNaN","$utils","earthDistance","lat","lng","distanceStr","toFixed","fail","openLocationSetting","openSetting","showIntegralTip","mall","setting","member_integral_rule","changeIntegral","use","integral","inputRemark","_this5","getPayOrderId","queue_id","token","errMsg","_this6","retry","pay","_this7","$payment","redirectTo","encodeURIComponent","page_url","jump","coupon","coupon_error","show_scroll","subscribe","_this8","hasError","errors","goods_form_validate_result","$subscribe","template_message_list","handleGoodsFormInput","_ref3","signArr","split","goodsIndex","handleGoodsFormValidate","_ref4","count","num","goods_count","handleAddressInput","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_8_oneOf_1_1_node_modules_css_loader_index_js_ref_8_oneOf_1_2_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_3_node_modules_sass_loader_dist_cjs_js_ref_8_oneOf_1_4_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_8_oneOf_1_5_node_modules_vue_loader_lib_index_js_vue_loader_options_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_custom_block_loader_index_js_ref_0_1_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_order_submit_vue_vue_type_style_index_0_id_48e83c8a_scoped_true_lang_scss___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_8_oneOf_1_1_node_modules_css_loader_index_js_ref_8_oneOf_1_2_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_3_node_modules_sass_loader_dist_cjs_js_ref_8_oneOf_1_4_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_8_oneOf_1_5_node_modules_vue_loader_lib_index_js_vue_loader_options_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_custom_block_loader_index_js_ref_0_1_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_order_submit_vue_vue_type_style_index_0_id_48e83c8a_scoped_true_lang_scss___WEBPACK_IMPORTED_MODULE_0___default"],"mappings":"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","file":"pages/order-submit/order-submit.js","sourcesContent":["module.exports = require(\"../siteinfo.js\");","import { render, staticRenderFns } from \"./order-submit.vue?vue&type=template&id=48e83c8a&scoped=true&filter-modules=%7B%7D&\"\nimport script from \"./order-submit.vue?vue&type=script&lang=js&\"\nexport * from \"./order-submit.vue?vue&type=script&lang=js&\"\nimport style0 from \"./order-submit.vue?vue&type=style&index=0&id=48e83c8a&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"48e83c8a\",\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/Users/liushibo/project/outsourceProject/jiuhejiang/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('48e83c8a')) {\n      api.createRecord('48e83c8a', component.options)\n    } else {\n      api.reload('48e83c8a', component.options)\n    }\n    module.hot.accept(\"./order-submit.vue?vue&type=template&id=48e83c8a&scoped=true&filter-modules=%7B%7D&\", function () {\n      api.rerender('48e83c8a', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"src/pages/order-submit/order-submit.vue\"\nexport default component.exports","export * from \"-!../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--15-0!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./order-submit.vue?vue&type=template&id=48e83c8a&scoped=true&filter-modules=%7B%7D&\"","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var l0 = _vm.__map(_vm.previewData.mch_list, function(mch, mchIndex) {\n    var m0 = _vm.noCouponStatus(mchIndex)\n    return {\n      $orig: _vm.__get_orig(mch),\n      m0: m0\n    }\n  })\n\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        l0: l0\n      }\n    }\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import mod from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./order-submit.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./order-submit.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport {mapGetters, mapState} from 'vuex';\nimport AppDiyForm from \"../../components/page-component/app-diy-form/app-diy-form.vue\";\nimport appSubmitGoods from './app-submit-goods.vue';\nimport AppCouponPick from \"./app-coupon-pick\";\nimport AppBottomModal from \"./app-bottom-modal\";\nimport AppAddressBar from \"./app-address-bar\";\nimport AppSubmitCheckbox from \"./app-submit-checkbox\";\nimport AppClose from '../../components/basic-component/app-close/app-close.vue';\n\nexport default {\n    name: 'order-submit',\n    components: {\n        AppSubmitCheckbox,\n        AppAddressBar,\n        AppBottomModal,\n        AppCouponPick,\n        AppDiyForm,\n        appSubmitGoods,\n        AppClose\n    },\n    data() {\n        return {\n            totalTitle: '合计',\n            check: false,\n            previewData: {\n                mch_list: [],\n                total_price: 0,\n                vip_card_discount_total_price: null,\n                custom_currency_all: []\n            },\n            getLocationFail: false,\n            previewUrl: null,\n            submitUrl: null,\n            plugin: null,\n            orderPageUrl: null,\n            submitLock: false,\n            getPayDataTimer: null,\n            userTheme: null,\n            is_gift: false,\n            payDataUrl: null,\n            showPayResult: true,\n            payCancelUrl: null,\n            loadingPreviewData: true,\n            showClose: false,\n            is_open: false,\n            mchList: '',\n            p_pay_id: '',//重新提交处理\n        };\n    },\n    computed: {\n        ...mapState({\n            appImg: state => state.mallConfig.__wxapp_img,\n        }),\n        theme() {\n            return this.userTheme ? this.userTheme : this.getTheme;\n        },\n        ...mapGetters('mallConfig', {\n            getTheme: 'getTheme',\n        }),\n        themeBgClass() {\n            if (this.userTheme && this.userTheme.indexOf('gift') >= 0) {\n                return `${this.theme} ${this.theme}-background`;\n            }\n        },\n        themeTextClass() {\n            if (this.userTheme && this.userTheme.indexOf('gift') >= 0) {\n                return `${this.theme} ${this.theme}-color`;\n            }\n        },\n    },\n    onLoad(options) { this.$commonLoad.onload(options);\n        let mchList = JSON.parse(options.mch_list);\n        let list = [];\n        for(let item of mchList) {\n            if(item.mch_id > 0) {\n                list.push(item.mch_id)\n            }\n        }\n        this.is_gift = this.userTheme && this.userTheme.indexOf('gift') >= 0 ? true : false;\n        this.mchList = list.length > 0 ? JSON.stringify(list) : '0';\n        if (this.submitLock) return;\n        this.setFormData(options);\n        this.$event.on(this.$const.EVENT_USER_LOGIN).then(() => {\n            this.loadPreviewData();\n        });\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n    },\n    onShow() {\n        this.showClose = false;\n        setTimeout(()=>{\n            this.showClose = true;\n\n\n\n        });\n    },\n    onUnload() {\n        if (this.getPayDataTimer) {\n            clearTimeout(this.getPayDataTimer);\n        }\n    },\n    watch: {\n        'previewData.address.name': {\n            handler() {\n                this.changeZitiAddress();\n            },\n        },\n        'previewData.address.mobile': {\n            handler() {\n                this.changeZitiAddress();\n            },\n        },\n    },\n    methods: {\n        getMall(e) {\n            console.log(e)\n            if(e != undefined) {\n              this.is_open = e && e.is_open == 1 ? true : false;\n              if(this.is_open) {\n\n                  if (this.submitLock) return;\n\n\n\n\n\n\n                  this.loadPreviewData();\n\n              }\n            }\n        },\n        \n        noCouponStatus(mchIndex) {\n            const mchNoCouponStatusList = this.$store.getters['orderSubmit/getMchNoCouponStatusList'];\n            if (mchNoCouponStatusList[mchIndex])\n                return true;\n            else\n                return false;\n        },\n        navigateVipCardPrivilege() {\n            uni.navigateTo({\n                url: '/plugins/vip_card/rights/rights?id=1',\n            });\n        },\n        showCouponPicker(index) {\n            this.previewData.mch_list[index].showCouponPicker = true;\n        },\n        reversalShowInsertRows(index) {\n            this.previewData.mch_list[index].showInsertRows = !this.previewData.mch_list[index].showInsertRows;\n        },\n        updateList(e, index) {\n            this.previewData.mch_list[index] = e;\n            this.$forceUpdate();\n        },\n        setParams(options) {\n            if (options.total_title) {\n                this.totalTitle = options.total_title;\n            }\n        },\n        handleOrderFormInput({data, sign}) {\n            const result = [];\n            for (let i in data) {\n                result[i] = {\n                    key: data[i].key,\n                    label: data[i].name,\n                    value: data[i].value,\n                    required: data[i].is_required,\n                };\n            }\n            const formData = this.$store.state.orderSubmit.formData;\n            formData.list[sign].order_form = result;\n            this.$store.commit('orderSubmit/mutSetFormData', formData);\n        },\n        handleOrderFormValidate({result, sign}) {\n            const formData = this.$store.state.orderSubmit.formData;\n            formData.list[sign].order_form_validate_result = result;\n            this.$store.commit('orderSubmit/mutSetFormData', formData);\n        },\n        setFormData(options) {\n            this.previewUrl = decodeURIComponent(options.preview_url || this.$api.order.preview);\n            this.submitUrl = decodeURIComponent(options.submit_url || this.$api.order.submit);\n            this.plugin = options.plugin || null;\n            this.orderPageUrl = decodeURIComponent(options.order_page_url || '/pages/order/index/index?status=0');\n            this.userTheme = options.theme || null;\n            this.payDataUrl = decodeURIComponent(options.pay_data_url || this.$api.order.pay_data);\n            this.payCancelUrl = options.pay_cancel_url ? decodeURIComponent(options.pay_cancel_url) : null;\n            this.showPayResult = options.show_pay_result || true;\n            if (this.showPayResult === 'true') this.showPayResult = true;\n            if (this.showPayResult === 'false') this.showPayResult = false;\n            const list = JSON.parse(options.mch_list);\n\n            // 商户列表先做下排序，主商城必须在最前\n            for (let i in list) {\n                if (parseInt(list[i].mch_id) === 0) {\n                    const _mchItem = list[i];\n                    list.splice(i, 1);\n                    list.unshift(_mchItem);\n                    break;\n                }\n            }\n\n            for (let i in list) {\n                list[i].distance = 0;\n                list[i].remark = '';\n                list[i].order_form = [];\n                list[i].use_integral = 0;\n                list[i].user_coupon_id = 0;\n                for (let j in list[i].goods_list) {\n                    list[i].goods_list[j].cart_id = list[i].goods_list[j].cart_id || 0;\n                }\n                if (this.plugin === 'booking') {\n                    let store_id = this.bookStorage('get');\n                    list[i]['store_id'] = store_id ? store_id : '';\n                }\n            }\n            this.$store.commit('orderSubmit/mutSetFormData', {\n                list: list,\n                address_id: 0,\n\t\t\t\tsend_type: options.send_type || ''\n            });\n        },\n        bookStorage(type, store_id = '') {\n            let key = '_book_storage_order_preview';\n            if (type === 'get') {\n                return this.$storage.getStorageSync(key);\n            }\n            if (type === 'save') {\n                this.$storage.setStorageSync(key, store_id ? store_id : 0);\n            }\n        },\n        loadPreviewData() {\n            this.loadingPreviewData = true;\n            uni.showLoading({\n                mask: true,\n                title: '加载中',\n            });\n            this.$request({\n                url: this.previewUrl,\n                method: 'post',\n                data: {\n                    form_data: JSON.stringify(this.$store.state.orderSubmit.formData),\n                },\n            }).then(response => {\n                this.loadingPreviewData = false;\n                uni.hideLoading();\n                if (response.code === 0) {\n                    if (response.data.allZiti && !response.data.address) {\n                        response.data.address = {\n                            name: '',\n                            mobile: '',\n                        };\n                    }\n                    for (let i in response.data.mch_list) {\n                        response.data.mch_list[i].showCouponPicker = false;\n                        response.data.mch_list[i].noCoupons = false;\n                        response.data.mch_list[i].showInsertRows = false;\n                    }\n                    this.previewData = response.data;\n                    this.setDiyFormScrollStatus();\n                    this.checkCouponError();\n                    this.updateStoreDistance();\n                    this.updateGoodsCount();\n                } else {\n                    uni.showModal({\n                        title: '提示',\n                        content: response.msg,\n                        showCancel: false,\n                        success: () => {\n                            uni.navigateBack();\n                        },\n                    });\n                }\n            }).catch(() => {\n                this.loadingPreviewData = false;\n                uni.hideLoading();\n            });\n        },\n        navigateStore(mchIndex) {\n            if (this.previewData.mch_list[mchIndex].mch.id != 0) {\n                return;\n            }\n            let firstGoodsId = '';\n            if (this.plugin === 'booking') {\n                firstGoodsId = this.previewData.mch_list[0].goods_list[0].id;\n            }\n            let plugin = this.plugin || '';\n            uni.navigateTo({\n                url: `/pages/order-submit/store-pick?mchIndex=${mchIndex}&plugin=${plugin}&firstGoodsId=${firstGoodsId}`,\n            });\n        },\n        navigateCoupon(mchIndex) {\n            uni.navigateTo({\n                url: `/pages/order-submit/coupon-pick?mchIndex=${mchIndex}`,\n            });\n        },\n        navigateSvip(mchIndex) {\n            uni.navigateTo({\n                url: `/pages/order-submit/vip-card?mchIndex=${mchIndex}`,\n            });\n        },\n        changeZitiAddress() {\n            const formData = this.$store.state.orderSubmit.formData;\n            formData.address = {\n                name: this.previewData.address ? this.previewData.address.name : '',\n                mobile: this.previewData.address ? this.previewData.address.mobile : '',\n            };\n            this.$store.commit('orderSubmit/mutSetFormData', formData);\n        },\n        changeSendType(mchIndex, value) {\n            if (this.previewData.mch_list[mchIndex].delivery.send_type == value) return;\n            const formData = this.$store.state.orderSubmit.formData;\n            formData.list[mchIndex].send_type = value;\n            this.$store.commit('orderSubmit/mutSetFormData', formData);\n            this.previewData.mch_list[mchIndex].delivery.send_type = value;\n            this.loadPreviewData();\n        },\n        updateStoreDistance() {\n            if (!this.previewData) return;\n            if (!this.previewData.has_ziti && this.plugin != 'booking') {\n                return;\n            }\n\n            uni.getLocation({\n                success: (res) => {\n                    for (let i in this.previewData.mch_list) {\n                        if (!this.previewData.mch_list[i].store) {\n                            continue;\n                        }\n                        if (this.previewData.mch_list[i].store.distance &&\n                            this.previewData.mch_list[i].store.distance != '-m') {\n                            continue;\n                        }\n                        if (\n                            this.previewData.mch_list[i].store.latitude == '' ||\n                            this.previewData.mch_list[i].store.longitude == '' ||\n                            isNaN(this.previewData.mch_list[i].store.latitude) ||\n                            isNaN(this.previewData.mch_list[i].store.longitude)\n                        ) {\n                            continue;\n                        }\n                        const distance = this.$utils.earthDistance({\n                            lat: res.latitude,\n                            lng: res.longitude\n                        }, {\n                            lat: this.previewData.mch_list[i].store.latitude,\n                            lng: this.previewData.mch_list[i].store.longitude\n                        });\n                        let distanceStr = '-m';\n                        if (distance > 1000) {\n                            distanceStr = (distance / 1000).toFixed(2) + 'km';\n                        } else {\n                            distanceStr = distance.toFixed(0) + 'm';\n                        }\n                        this.previewData.mch_list[i].store.distance = distanceStr;\n                    }\n                },\n                fail: () => {\n                    this.getLocationFail = true;\n                },\n            });\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n        },\n        openLocationSetting() {\n            this.getLocationFail = false;\n            uni.openSetting({});\n        },\n        showIntegralTip() {\n            uni.showModal({\n                title: '积分抵扣说明',\n                content: this.$store.state.mallConfig.mall.setting.member_integral_rule,\n                showCancel: false,\n            });\n        },\n        changeIntegral(mchIndex) {\n            const formData = this.$store.state.orderSubmit.formData;\n            const use = !this.previewData.mch_list[mchIndex].integral.use;\n            formData.list[mchIndex].use_integral = use ? 1 : 0;\n            this.previewData.mch_list[mchIndex].integral.use = use;\n            this.loadPreviewData();\n        },\n        inputRemark(mchIndex) {\n            const formData = this.$store.state.orderSubmit.formData;\n            formData.list[mchIndex].remark = this.previewData.mch_list[mchIndex].remark;\n            this.$store.commit('orderSubmit/mutSetFormData', formData);\n        },\n        submit() {\n            uni.showLoading({\n                mask: true,\n                title: '提交中',\n            });\n            this.$request({\n                url: this.submitUrl,\n                method: 'post',\n                data: {\n                    form_data: JSON.stringify(this.$store.state.orderSubmit.formData),\n                },\n            }).then(response => {\n                if (response.code === 0) {\n                    this.getPayOrderId(response.data.queue_id, response.data.token);\n                } else {\n                    this.submitLock = false;\n                    uni.hideLoading();\n                    uni.showModal({\n                        title: '',\n                        content: response.msg,\n                        showCancel: false,\n                    });\n                }\n            }).catch(e => {\n                this.submitLock = false;\n                uni.hideLoading();\n                uni.showModal({\n                    title: '提示',\n                    content: e.errMsg,\n                    showCancel: false,\n                });\n            });\n        },\n        getPayOrderId(queue_id, token) {\n            this.$request({\n                url: this.payDataUrl,\n                method: 'post',\n                data: {\n                    queue_id: queue_id,\n                    token: token,\n                },\n            }).then(response => {\n                if (response.code === 0) {\n                    if (response.data.retry && response.data.retry === 1) {\n                        this.getPayDataTimer = setTimeout(() => {\n                            this.getPayOrderId(queue_id, token);\n                        }, 1000);\n                    } else {\n                        uni.hideLoading();\n                        this.pay(response.data);\n                    }\n                } else {\n                    this.submitLock = false;\n                    uni.hideLoading();\n                    uni.showModal({\n                        title: '提示',\n                        content: response.msg,\n                        showCancel: false,\n                    });\n                }\n            }).catch(e => {\n                this.submitLock = false;\n                uni.hideLoading();\n                uni.showModal({\n                    title: '提示',\n                    content: e.errMsg,\n                    showCancel: false,\n                });\n            });\n        },\n        pay(data) {\n            this.p_pay_id = data.id;\n            this.$payment.pay(data.id).then(res => {\n                if (this.showPayResult) {\n                    uni.redirectTo({\n                        url: `/pages/order-submit/pay-result?payment_order_union_id=${data.id}&order_page_url=${encodeURIComponent(this.orderPageUrl)}`,\n                    });\n                } else {\n\n                    let page_url = this.orderPageUrl;\n                    if (page_url.indexOf('?') === -1) {\n                        page_url += '?'\n                    } else {\n                        page_url += '&';\n                    }\n\n                    delete data.id;\n\n                    page_url += `pay_data=${JSON.stringify(data)}`;\n\n                    uni.redirectTo({\n                        url: page_url,\n                    });\n                }\n            }).catch(e => {\n                if (this.payCancelUrl) {\n                    let page_url = this.payCancelUrl;\n                    if (page_url.indexOf('?') === -1) {\n                        page_url += '?'\n                    } else {\n                        page_url += '&';\n                    }\n                    page_url += `pay_data=${JSON.stringify(data)}`;\n                    uni.redirectTo({\n                        url: page_url,\n                    });\n                } else {\n                    if (e.errMsg === '5b03b6e009796c698d132908cb635fca') {\n                        //重新发起支付\n                        this.submitLock = false;\n                    } else {\n                        uni.showModal({\n                            title: '提交失败',\n                            content: e.errMsg,\n                            showCancel: false,\n                            success: () => {\n                                uni.redirectTo({\n                                    url: this.orderPageUrl,\n                                });\n                            },\n                        });\n                    }\n                }\n            });\n        },\n        jump() {\n            uni.navigateTo({\n                url: `/pages/order-submit/map`,\n            });\n        },\n        checkCouponError() {\n            for (let i in this.previewData.mch_list) {\n                if (this.previewData.mch_list[i].coupon && this.previewData.mch_list[i].coupon.coupon_error) {\n                    uni.showModal({\n                        title: '',\n                        content: this.previewData.mch_list[i].coupon.coupon_error,\n                        showCancel: false,\n                    });\n                    return;\n                }\n            }\n        },\n        setDiyFormScrollStatus() {\n            for (let i in this.previewData.mch_list) {\n                let order_form = this.previewData.mch_list[i].order_form;\n                if (order_form) {\n                    if (order_form.value && order_form.value.length && order_form.value.length >= 5) {\n                        order_form.show_scroll = true;\n                    } else {\n                        order_form.show_scroll = false;\n                    }\n                }\n            }\n        },\n        subscribe() {\n            if (this.p_pay_id) {\n                this.pay({\n                    id: this.p_pay_id\n                });\n                return true;\n            } else {\n                this.p_pay_id = '';\n            }\n            for (let i in this.$store.state.orderSubmit.formData.list) {\n                const item = this.$store.state.orderSubmit.formData.list[i];\n                if (!item.order_form_validate_result) continue;\n                if (item.order_form_validate_result.hasError) {\n                    uni.showModal({\n                        title: '提示',\n                        content: item.order_form_validate_result.errors[0].msg,\n                        showCancel: false,\n                    });\n                    return;\n                }\n            }\n            for (let i in this.$store.state.orderSubmit.formData.list) {\n                for (let j in this.$store.state.orderSubmit.formData.list[i].goods_list) {\n                    const item = this.$store.state.orderSubmit.formData.list[i].goods_list[j];\n                    if (!item.goods_form_validate_result) continue;\n                    if (item.goods_form_validate_result.hasError) {\n                        uni.showModal({\n                            title: '提示',\n                            content: item.goods_form_validate_result.errors[0].msg,\n                            showCancel: false,\n                        });\n                        return;\n                    }\n                }\n                if (this.plugin === 'booking' && this.$store.state.orderSubmit.formData.list[i]) {\n                    this.bookStorage('save', this.$store.state.orderSubmit.formData.list[i].store_id);\n                }\n            }\n            if (this.submitLock) return;\n            this.submitLock = true;\n            this.$subscribe(this.previewData.template_message_list).then(res => {\n                this.submit();\n            }).catch(() => {\n                this.submit();\n            });\n        },\n        handleGoodsFormInput({data, sign}) {\n            const signArr = sign.split(',');\n            const mchIndex = parseInt(signArr[0]);\n            const goodsIndex = parseInt(signArr[1]);\n            // const formId = parseInt(signArr[2]);\n            const result = [];\n            for (let i in data) {\n                result[i] = {\n                    key: data[i].key,\n                    label: data[i].name,\n                    value: data[i].value,\n                    required: data[i].is_required,\n                };\n            }\n            const formData = this.$store.state.orderSubmit.formData;\n            formData.list[mchIndex].goods_list[goodsIndex].form_data = result;\n            this.$store.commit('orderSubmit/mutSetFormData', formData);\n        },\n        handleGoodsFormValidate({result, sign}) {\n            if (!sign) return;\n            const signArr = sign.split(',');\n            const mchIndex = parseInt(signArr[0]);\n            const goodsIndex = parseInt(signArr[1]);\n            const formData = this.$store.state.orderSubmit.formData;\n            formData.list[mchIndex].goods_list[goodsIndex].goods_form_validate_result = result;\n            this.$store.commit('orderSubmit/mutSetFormData', formData);\n        },\n        updateGoodsCount() {\n            for (let i in this.previewData.mch_list) {\n                let count = 0;\n                for (let j in this.previewData.mch_list[i].goods_list) {\n                    count += parseInt(this.previewData.mch_list[i].goods_list[j].num);\n                }\n                this.previewData.mch_list[i].goods_count = count;\n            }\n        },\n        handleAddressInput(e) {\n            if (typeof e.name !== 'undefined') this.previewData.address.name = e.name;\n            if (typeof e.mobile !== 'undefined') this.previewData.address.mobile = e.mobile;\n        },\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n    },\n}\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-2!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./order-submit.vue?vue&type=style&index=0&id=48e83c8a&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-2!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./order-submit.vue?vue&type=style&index=0&id=48e83c8a&scoped=true&lang=scss&\""],"sourceRoot":""}