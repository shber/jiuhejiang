{"version":3,"sources":["webpack:///./src/pages/search/search.vue?3214","webpack:///./src/pages/search/search.vue?ddc3","webpack:///./src/pages/search/search.vue?7214","webpack:///./src/pages/search/search.vue?67fa","webpack:///./src/pages/search/search.vue","webpack:///./src/pages/search/search.vue?4633"],"names":["__webpack_require__","r","__webpack_exports__","_search_vue_vue_type_template_id_6a3cceca_scoped_true_filter_modules_7B_7D___WEBPACK_IMPORTED_MODULE_0__","_search_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_1__","__WEBPACK_IMPORT_KEY__","key","d","_node_modules_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_3__","component","Object","options","__file","_node_modules_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_15_0_node_modules_dcloudio_webpack_uni_mp_loader_lib_template_js_node_modules_vue_loader_lib_index_js_vue_loader_options_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_custom_block_loader_index_js_ref_0_1_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_search_vue_vue_type_template_id_6a3cceca_scoped_true_filter_modules_7B_7D___WEBPACK_IMPORTED_MODULE_0__","render","staticRenderFns","_h","this","$createElement","_self","_c","_withStripped","_node_modules_babel_loader_lib_index_js_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_12_1_node_modules_dcloudio_webpack_uni_mp_loader_lib_script_js_node_modules_vue_loader_lib_index_js_vue_loader_options_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_custom_block_loader_index_js_ref_0_1_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_search_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__","_node_modules_babel_loader_lib_index_js_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_12_1_node_modules_dcloudio_webpack_uni_mp_loader_lib_script_js_node_modules_vue_loader_lib_index_js_vue_loader_options_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_custom_block_loader_index_js_ref_0_1_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_search_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0___default","n","_vuex","_getSelect","page","is_loading","is_no_more","name","components","uOrdinaryList","uAttr","data","hotGoodsList","list","isSearch","historyList","keyword","recommend_list","mch_id","beginAfter","tempList","realHistoryList","loading","goodsReset","attrGoods","attrShow","goods","submitUrl","previewUrl","sign","url","computed","_objectSpread","mapGetters","getSetting","getTheme","newList","length","sizeTransform","windowWidth","uni","getSystemInfoSync","p","boxLeft","marginRight","btnWidth","listWidth","mapState","isListUnderlinePrice","state","mallConfig","mall","setting","is_list_underline_price","onLoad","$commonLoad","onload","$api","default","goods_list","pt","wholesale","index","getHistory","getSelect","getRecommend","getHotSearch","onReachBottom","getGoodsList","watch","handler","v","cancel","immediate","methods","_regenerator","mark","_callee","self","_this","wrap","_context","prev","next","setTimeout","createSelectorQuery","in","selectAll","fields","size","res","formatData","selectLimitList","selectAllList","exec","stop","apply","arguments","_self$sizeTransform","item","line_width","i","alone_width_count","width","push","_self$sizeTransform2","newArr","JSON","parse","stringify","indexMore","secondWidth","maxWidth","forEach","splice","arr","goodsNav","navigateTo","clear","hideKeyboard","_this2","is_show_hot_goods","$request","hot_search","then","response","reset","search","trim","setHistory","_this3","_this3$list","code","msg","_toConsumableArray","showModal","content","catch","unshift","pop","setStorageSync","getStorageSync","deleteHistory","success","confirm","removeStorageSync","historyClick","_this4","new_recommend","goods_id","type","buyProduct","_ref","_this5","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_8_oneOf_1_1_node_modules_css_loader_index_js_ref_8_oneOf_1_2_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_3_node_modules_sass_loader_dist_cjs_js_ref_8_oneOf_1_4_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_8_oneOf_1_5_node_modules_vue_loader_lib_index_js_vue_loader_options_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_custom_block_loader_index_js_ref_0_1_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_search_vue_vue_type_style_index_0_id_6a3cceca_scoped_true_lang_scss___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_8_oneOf_1_1_node_modules_css_loader_index_js_ref_8_oneOf_1_2_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_3_node_modules_sass_loader_dist_cjs_js_ref_8_oneOf_1_4_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_8_oneOf_1_5_node_modules_vue_loader_lib_index_js_vue_loader_options_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_custom_block_loader_index_js_ref_0_1_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_search_vue_vue_type_style_index_0_id_6a3cceca_scoped_true_lang_scss___WEBPACK_IMPORTED_MODULE_0___default"],"mappings":"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","file":"pages/search/search.js","sourcesContent":["import { render, staticRenderFns } from \"./search.vue?vue&type=template&id=6a3cceca&scoped=true&filter-modules=%7B%7D&\"\nimport script from \"./search.vue?vue&type=script&lang=js&\"\nexport * from \"./search.vue?vue&type=script&lang=js&\"\nimport style0 from \"./search.vue?vue&type=style&index=0&id=6a3cceca&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6a3cceca\",\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/Users/liushibo/project/outsourceProject/jiuhejiang/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('6a3cceca')) {\n      api.createRecord('6a3cceca', component.options)\n    } else {\n      api.reload('6a3cceca', component.options)\n    }\n    module.hot.accept(\"./search.vue?vue&type=template&id=6a3cceca&scoped=true&filter-modules=%7B%7D&\", function () {\n      api.rerender('6a3cceca', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"src/pages/search/search.vue\"\nexport default component.exports","export * from \"-!../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--15-0!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./search.vue?vue&type=template&id=6a3cceca&scoped=true&filter-modules=%7B%7D&\"","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import mod from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./search.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./search.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport {mapGetters, mapState} from 'vuex';\nimport uOrdinaryList from '../../components/page-component/u-goods-list/u-ordinary-list.vue';\nimport uAttr from '@/components/page-component/app-attr/app-attr.vue';\n\nlet page = 1;\nlet is_loading = false;\nlet is_no_more = false;\n\nexport default {\n    name: \"search\",\n    components: {\n        uOrdinaryList,\n        uAttr\n    },\n    data() {\n        return {\n            hotGoodsList: [],\n            list: [],\n            isSearch: false,\n            historyList: [],\n            keyword: '',\n            recommend_list: [],\n            mch_id: 0,\n            beginAfter: true,\n            tempList: [],\n            realHistoryList: [],\n            loading: false,\n            goodsReset: false,\n            attrGoods: {\n                attrShow: 0,\n                goods: null\n            },\n            submitUrl: '',\n            previewUrl: '',\n            sign: '',\n            url: ''\n        };\n    },\n    computed: {\n        ...mapGetters('mallConfig', {\n            getSetting: 'getSetting',\n            getTheme: 'getTheme',\n        }),\n        newList() {\n            if (this.list.length > 0) {\n                return this.list;\n            } else {\n                return this.recommend_list;\n            }\n        },\n        sizeTransform() {\n            const windowWidth = uni.getSystemInfoSync().windowWidth;\n            const p = 750 / windowWidth;\n            const boxLeft = 24 / p;\n            const marginRight = 20 / p;\n            const btnWidth = 60 / p;\n            const listWidth = windowWidth - boxLeft * 2;\n            return {\n                p, boxLeft, marginRight, btnWidth, listWidth\n            }\n        },\n        ...mapState({\n            isListUnderlinePrice: state => state.mallConfig.mall.setting.is_list_underline_price,\n        }),\n    },\n    onLoad(options) { this.$commonLoad.onload(options);\n        this.mch_id = options.mch_id ? options.mch_id : 0;\n        this.sign = options.sign ? options.sign : 'goods';\n        if (this.sign === 'goods') {\n            this.url = this.$api.default.goods_list;\n        } else if (this.sign === 'pt') {\n            this.url = this.$api.pt.goods;\n        } else if (this.sign === 'wholesale') {\n            this.url = this.$api.wholesale.index;\n        }\n        page = 1;\n        is_loading = false;\n        is_no_more = false;\n        this.historyList = this.getHistory();\n        this.getSelect();\n        this.getRecommend();\n        this.getHotSearch();\n    },\n    onReachBottom() {\n        if (is_no_more) {\n\n        } else {\n            this.goodsReset = false;\n            if (this.keyword) {\n                this.loading = true;\n                this.getGoodsList();\n            }\n        }\n    },\n    watch: {\n        keyword: {\n            handler(v) {\n                if (v == '') {\n                    this.cancel();\n                }\n            },\n            immediate: true,\n        }\n    },\n    methods: {\n        async getSelect() {\n            const historyList = this.historyList;\n            if (historyList && historyList.length) {\n                const self = this;\n\n                let time = 0;\n\n\n\n\n                setTimeout(() => {\n\n\n\n\n                    let query = uni.createSelectorQuery().in(this);\n\n                    query.selectAll('.once-item').fields({\n                        size: true,\n                    }, function (res) {\n                        self.formatData(res);\n                        if (self.beginAfter) {\n                            self.selectLimitList(res);\n                        } else {\n                            self.selectAllList();\n                        }\n                    }).exec();\n                },time)\n            }\n        },\n        formatData(res) {\n            const self = this;\n            const historyList = self.historyList;\n            const {marginRight, listWidth} = self.sizeTransform;\n\n            //列表格式化\n            let tempList = [];\n            let item = [];\n            let line_width = 0;\n            for (let i = 0; i < res.length; i++) {\n                const alone_width = res[i].width + marginRight;\n                let alone_width_count = alone_width + line_width;\n                if (alone_width_count <= listWidth) {\n                    item.push(historyList[i]);\n                    line_width = alone_width_count;\n                } else {\n                    if (item.length === 0 && line_width === 0) {\n                        tempList.push([historyList[i]]);\n                    } else {\n                        tempList.push(item);\n                        line_width = 0;\n                        item = [];\n                        i--;\n                    }\n                }\n            }\n            if (item.length) {\n                tempList.push(item);\n            }\n            this.tempList = tempList;\n        },\n\n        selectLimitList(res) {\n            const self = this;\n            const {btnWidth, listWidth, marginRight} = self.sizeTransform;\n            let newArr = JSON.parse(JSON.stringify(self.tempList));\n            let realHistoryList = [];\n            if (newArr.length > 2) {\n                let indexMore = 0;\n                const secondWidth = listWidth - btnWidth - marginRight;\n                let maxWidth = 0;\n                newArr[1].forEach((item, index) => {\n                    maxWidth += res[newArr[0].length + index].width + marginRight\n                    if (maxWidth <= secondWidth) {\n                        indexMore = index + 1;\n                    }\n                })\n                newArr[1].splice(indexMore, newArr[1].length - indexMore, {\n                    mark: true,\n                });\n                realHistoryList = [newArr[0], newArr[1]];\n                self.beginAfter = true;\n            } else {\n                //newArr.forEach(item => realHistoryList = [...realHistoryList, ...item]);\n                newArr.forEach(item => realHistoryList.push(item));\n                self.beginAfter = false;\n            }\n            self.realHistoryList = realHistoryList;\n        },\n\n        selectAllList() {\n            const tempList = this.tempList;\n            let arr = [];\n            if (tempList && tempList.length) {\n                for (let i = 0; i < 5 && i < tempList.length; i++) {\n                    arr.push(tempList[i]);\n                }\n            }\n            this.beginAfter = false;\n            this.realHistoryList = arr;\n        },\n        goodsNav(url) {\n            uni.navigateTo({url: url});\n        },\n        clear() {\n            uni.hideKeyboard()\n            this.keyword = '';\n            this.loading = false;\n        },\n        getHotSearch() {\n            if (this.getSetting.is_show_hot_goods != 1) {\n                return;\n            }\n            this.$request({\n                url: this.$api.goods.hot_search,\n            }).then(response => {\n                this.hotGoodsList = response.data.list;\n            });\n        },\n        cancel() {\n            this.isSearch = false;\n            this.loading = false;\n            this.keyword = '';\n            this.list = [];\n        },\n        reset() {\n            page = 1;\n            is_no_more = false;\n            this.goodsReset = true;\n            this.getGoodsList();\n        },\n        search() {\n            let keyword = this.keyword;\n            if (keyword === '') return;\n            this.keyword = keyword.trim();\n            this.setHistory();\n            this.getSelect();\n            this.reset();\n        },\n        getGoodsList() {\n            if (!this.keyword) return;\n            if (is_loading) return;\n            is_loading = true;\n            this.$request({\n                url: this.url,\n                data: {\n                    keyword: this.keyword,\n                    mch_id: this.mch_id,\n                    page: page,\n                }\n            }).then(response => {\n                is_loading = false;\n                this.isSearch = true;\n                this.loading = false;\n                let { code, data, msg } = response;\n                if (code === 0) {\n                    if (page === 1) this.list = [];\n                    if (data.list.length > 0) {\n                        this.list.push(...data.list);\n                        page++;\n                    } else {\n                        is_no_more = true;\n                        if (page === 1) this.getRecommend();\n                    }\n                } else {\n                    uni.showModal({\n                        content: msg\n                    })\n                }\n            }).catch(() => {\n                is_loading = false;\n            });\n        },\n        setHistory() {\n            let historyList = this.getHistory();\n            let keyword = this.keyword.trim();\n\n            historyList.forEach((item, index) => {\n                if (item.keyword === keyword) historyList.splice(index, 1);\n            });\n            historyList.unshift({\n                keyword: keyword,\n            });\n            if (historyList.length > 20) historyList.pop();\n            this.historyList = historyList;\n            uni.setStorageSync(\"SEARCH_HISTORY_LIST\", historyList);\n        },\n        getHistory() {\n            let historyList = uni.getStorageSync('SEARCH_HISTORY_LIST');\n            if (!historyList) historyList = [];\n            return historyList;\n        },\n        deleteHistory() {\n            let self = this;\n            uni.showModal({\n                content: '确认删除全部历史记录？',\n                success: function (res) {\n                    if (res.confirm) {\n                        uni.removeStorageSync(\"SEARCH_HISTORY_LIST\");\n                        self.historyList = [];\n                    }\n                }\n            });\n        },\n        historyClick(keyword) {\n            this.keyword = keyword.trim();\n            this.reset();\n        },\n        getRecommend() {\n            if (this.mch_id) return;\n            if (this.recommend_list.length > 0) return;\n            this.$request({\n                url: this.$api.goods.new_recommend,\n                data: {\n                    goods_id: 0,\n                    type: 'goods'\n                }\n            }).then(response => {\n                if (response.code === 0) this.recommend_list = response.data.list;\n            });\n        },\n        buyProduct({goods, attrShow}) {\n            this.attrGoods.goods= goods;\n            setTimeout(() => {\n                this.attrGoods.attrShow = attrShow;\n            });\n        }\n    }\n}\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-2!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./search.vue?vue&type=style&index=0&id=6a3cceca&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-2!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./search.vue?vue&type=style&index=0&id=6a3cceca&scoped=true&lang=scss&\""],"sourceRoot":""}