(global.webpackJsonp=global.webpackJsonp||[]).push([["plugins/scratch/index/index"],{543:
/*!*********************************************!*\
  !*** ./src/plugins/scratch/index/index.vue ***!
  \*********************************************/
/*! no static exports found */function(t,e,i){"use strict";i.r(e);var n=i(/*! ./index.vue?vue&type=template&id=2cdd31f0&scoped=true&filter-modules=%7B%7D& */544),r=i(/*! ./index.vue?vue&type=script&lang=js& */546);for(var s in r)"default"!==s&&function(t){i.d(e,t,function(){return r[t]})}(s);i(/*! ./index.vue?vue&type=style&index=0&id=2cdd31f0&scoped=true&lang=scss& */548);var a=i(/*! ../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js */10),o=Object(a.default)(r.default,n.render,n.staticRenderFns,!1,null,"2cdd31f0",null);o.options.__file="src/plugins/scratch/index/index.vue",e.default=o.exports},544:
/*!**************************************************************************************************************!*\
  !*** ./src/plugins/scratch/index/index.vue?vue&type=template&id=2cdd31f0&scoped=true&filter-modules=%7B%7D& ***!
  \**************************************************************************************************************/
/*! exports provided: render, staticRenderFns */function(t,e,i){"use strict";i.r(e);var n=i(/*! -!../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--15-0!../../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../node_modules/vue-loader/lib??vue-loader-options!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader??ref--0-1!../../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=template&id=2cdd31f0&scoped=true&filter-modules=%7B%7D& */545);i.d(e,"render",function(){return n.render}),i.d(e,"staticRenderFns",function(){return n.staticRenderFns})},545:
/*!************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--15-0!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!./node_modules/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader??ref--0-1!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./src/plugins/scratch/index/index.vue?vue&type=template&id=2cdd31f0&scoped=true&filter-modules=%7B%7D& ***!
  \************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! exports provided: render, staticRenderFns */function(t,e,i){"use strict";i.r(e),i.d(e,"render",function(){return n}),i.d(e,"staticRenderFns",function(){return r});var n=function(){var t=this.$createElement;this._self._c},r=[];n._withStripped=!0},546:
/*!**********************************************************************!*\
  !*** ./src/plugins/scratch/index/index.vue?vue&type=script&lang=js& ***!
  \**********************************************************************/
/*! no static exports found */function(t,e,i){"use strict";i.r(e);var n=i(/*! -!../../../../node_modules/babel-loader/lib!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!../../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../node_modules/vue-loader/lib??vue-loader-options!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader??ref--0-1!../../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js& */547),r=i.n(n);for(var s in n)"default"!==s&&function(t){i.d(e,t,function(){return n[t]})}(s);e.default=r.a},547:
/*!**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/babel-loader/lib!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!./node_modules/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader??ref--0-1!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./src/plugins/scratch/index/index.vue?vue&type=script&lang=js& ***!
  \**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */function(t,e,i){"use strict";(function(t){function n(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,n)}return i}function r(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s={name:"index",components:{appShareQrCodePoster:function(){return i.e(/*! import() | components/page-component/app-share-qr-code-poster/app-share-qr-code-poster */"components/page-component/app-share-qr-code-poster/app-share-qr-code-poster").then(i.bind(null,/*! ../../../components/page-component/app-share-qr-code-poster/app-share-qr-code-poster */2345))}},computed:function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?n(i,!0).forEach(function(e){r(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):n(i).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}({},(0,i(/*! vuex */12).mapState)({appImg:function(t){return t.mallConfig.plugin.scratch.app_image},userInfo:function(t){return t.user.info}})),data:function(){return{ctx:void 0,interval:void 0,minX:void 0,minY:void 0,maxX:void 0,maxY:void 0,lastX:void 0,lastY:void 0,logs:[],setting:{},list:null,oppty:0,msg:"",is_start:!0,is_award:!1,is_name:!1,extra_list:null,touch_end:!0,poster:this.$api.scratch.poster,poster_status:!1,shareShow:!1,userLoginShow:!1,r:16,is_integral:!1}},watch:{shareShow:function(t,e){!1===t&&!0===e&&this.init()}},onUnload:function(){clearInterval(this.interval)},onHide:function(){clearInterval(this.interval)},onLoad:function(t){this.$commonLoad.onload(t),wx.showShareMenu({withShareTicket:!0,menus:["shareAppMessage","shareTimeline"]})},onShareTimeline:function(){return this.$shareTimeline({title:this.$children[0].navigationBarTitle,query:{}})},onShow:function(){var e=this;e.$showLoading({title:"加载中"}),e.$request({url:e.$api.scratch.index}).then(function(i){if(e.$hideLoading(),e.is_award=!1,i.data){var n=[1===i.code?i.msg:"",i.data.setting,i.data.oppty,i.data.list];e.msg=n[0],e.setting=n[1],e.oppty=n[2],e.list=n[3],e.is_integral=e.setting.deplete_integral_num>0}else t.showToast({title:i.msg,icon:"none"});e.init()}),e.prizeList(),e.interval=setInterval(function(){e.prizeList()},1e4)},onShareAppMessage:function(){return this.$shareAppMessage({title:this.$children[0].navigationBarTitle,path:"/plugins/scratch/index/index",params:{}})},methods:{hShareAppMessage:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.$shareAppMessage({title:this.$children[0].navigationBarTitle,path:"/plugins/scratch/index/index",params:{}},t)},register:function(){this.msg?t.showToast({icon:"none",title:this.msg}):(this.is_integral=!1,this.init())},share:function(){this.shareShow=!0},home:function(){t.redirectTo({url:"/pages/index/index"})},prize:function(){t.navigateTo({url:"/plugins/scratch/prize/prize"})},rules:function(){t.navigateTo({url:"/pages/rules/index?url=".concat(encodeURIComponent(this.$api.scratch.setting),"&keys=").concat(JSON.stringify(["setting","rule"]))})},prizeList:function(){var t=this;t.$request({url:t.$api.scratch.record}).then(function(e){0===e.code&&(t.logs=e.data)})},onStart:function(){this.init();var t=[this.setting.deplete_integral_num>0,this.extra_list,!1];this.is_integral=t[0],this.list=t[1],this.is_award=t[2]},init:function(){var e=this,i=[!0,!1];e.is_start=i[0],e.is_name=i[1],setTimeout(function(){var i=t.createSelectorQuery();i.select("#frame").boundingClientRect(),i.exec(function(i){var n=i[0].width,r=i[0].height,s=["","","","","",""];e.lastX=s[0],e.lastY=s[1],e.minX=s[2],e.minY=s[3],e.maxX=s[4],e.maxY=s[5];var a=[16,n,r];e.r=a[0],e.canvasWidth=a[1],e.canvasHeight=a[2];var o=t.createCanvasContext("scratch");o.drawImage("./../image/scratch_hide.png",0,0,n,r),e.ctx=o,o.draw(!0,function(t){e.is_name=!0})})})},drawRect:function(t,e){var i=this.r/2,n=t-i>0?t-i:0,r=e-i>0?e-i:0;if(""!==this.minX)this.minX=this.minX>n?n:this.minX,this.minY=this.minY>r?r:this.minY,this.maxX=this.maxX>n?this.maxX:n,this.maxY=this.maxY>r?this.maxY:r;else{var s=[n,r,n,r];this.minX=s[0],this.minY=s[1],this.maxX=s[2],this.maxY=s[3]}var a=[n,r];return this.lastX=a[0],this.lastY=a[1],[n,r,2*i]},clearArc:function(t,e,i){var n=this.r,r=this.ctx,s=n-i,a=Math.sqrt(n*n-s*s),o=t-s,c=e-a,u=2*s,h=2*a;i<=n&&(r.clearRect(o,c,u,h),i+=2,this.clearArc(t,e,i))},touchStart:function(e){"User ID不能为空。"===this.msg?(this.userLoginShow=!0,this.$store.dispatch("user/info")):this.msg&&t.showToast({icon:"none",title:this.msg})},touchMove:function(t){if(this.is_start&&!this.msg){this.drawRect(t.touches[0].x,t.touches[0].y),this.clearArc(t.touches[0].x,t.touches[0].y,2),this.ctx.draw(!0)}},touchEnd:function(e){var i=this;if(i.is_start&&!i.msg){var n=i.canvasWidth,r=i.canvasHeight,s=i.minX,a=i.minY,o=i.maxX,c=i.maxY;o-s>.4*n&&c-a>.4*r&&i.touch_end&&(i.touch_end=!1,i.$request({url:i.$api.scratch.receive,data:{id:i.list.id}}).then(function(e){if(0===e.code){i.ctx.draw();var n=[e.msg,e.data.setting,e.data.oppty,e.data.list];i.msg=n[0],i.setting=n[1],i.oppty=n[2],i.extra_list=n[3];var r=[!1,5!=i.list.type];i.is_start=r[0],i.is_award=r[1]}else t.showToast({icon:"none",content:e.msg}),i.onStart();i.touch_end=!0}))}}}};e.default=s}).call(this,i(/*! ./node_modules/@dcloudio/uni-mp-weixin/dist/index.js */1).default)},548:
/*!*******************************************************************************************************!*\
  !*** ./src/plugins/scratch/index/index.vue?vue&type=style&index=0&id=2cdd31f0&scoped=true&lang=scss& ***!
  \*******************************************************************************************************/
/*! no static exports found */function(t,e,i){"use strict";i.r(e);var n=i(/*! -!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--8-oneOf-1-1!../../../../node_modules/css-loader??ref--8-oneOf-1-2!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src??ref--8-oneOf-1-3!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--8-oneOf-1-5!../../../../node_modules/vue-loader/lib??vue-loader-options!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader??ref--0-1!../../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&id=2cdd31f0&scoped=true&lang=scss& */549),r=i.n(n);for(var s in n)"default"!==s&&function(t){i.d(e,t,function(){return n[t]})}(s);e.default=r.a},549:
/*!************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--8-oneOf-1-1!./node_modules/css-loader??ref--8-oneOf-1-2!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/src??ref--8-oneOf-1-3!./node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--8-oneOf-1-5!./node_modules/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader??ref--0-1!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./src/plugins/scratch/index/index.vue?vue&type=style&index=0&id=2cdd31f0&scoped=true&lang=scss& ***!
  \************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */function(t,e,i){}},[[542,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../../.sourcemap/mp-weixin/plugins/scratch/index/index.js.map