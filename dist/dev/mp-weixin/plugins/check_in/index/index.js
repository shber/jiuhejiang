(global.webpackJsonp=global.webpackJsonp||[]).push([["plugins/check_in/index/index"],{769:
/*!**********************************************!*\
  !*** ./src/plugins/check_in/index/index.vue ***!
  \**********************************************/
/*! no static exports found */function(e,t,n){"use strict";n.r(t);var i=n(/*! ./index.vue?vue&type=template&id=259b3f2c&scoped=true&filter-modules=%7B%7D& */770),a=n(/*! ./index.vue?vue&type=script&lang=js& */772);for(var r in a)"default"!==r&&function(e){n.d(t,e,function(){return a[e]})}(r);n(/*! ./index.vue?vue&type=style&index=0&id=259b3f2c&scoped=true&lang=scss& */774);var o=n(/*! ../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js */10),c=Object(o.default)(a.default,i.render,i.staticRenderFns,!1,null,"259b3f2c",null);c.options.__file="src/plugins/check_in/index/index.vue",t.default=c.exports},770:
/*!***************************************************************************************************************!*\
  !*** ./src/plugins/check_in/index/index.vue?vue&type=template&id=259b3f2c&scoped=true&filter-modules=%7B%7D& ***!
  \***************************************************************************************************************/
/*! exports provided: render, staticRenderFns */function(e,t,n){"use strict";n.r(t);var i=n(/*! -!../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--15-0!../../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../node_modules/vue-loader/lib??vue-loader-options!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader??ref--0-1!../../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=template&id=259b3f2c&scoped=true&filter-modules=%7B%7D& */771);n.d(t,"render",function(){return i.render}),n.d(t,"staticRenderFns",function(){return i.staticRenderFns})},771:
/*!*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--15-0!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!./node_modules/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader??ref--0-1!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./src/plugins/check_in/index/index.vue?vue&type=template&id=259b3f2c&scoped=true&filter-modules=%7B%7D& ***!
  \*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! exports provided: render, staticRenderFns */function(e,t,n){"use strict";n.r(t),n.d(t,"render",function(){return i}),n.d(t,"staticRenderFns",function(){return a});var i=function(){var e=this.$createElement;this._self._c},a=[];i._withStripped=!0},772:
/*!***********************************************************************!*\
  !*** ./src/plugins/check_in/index/index.vue?vue&type=script&lang=js& ***!
  \***********************************************************************/
/*! no static exports found */function(e,t,n){"use strict";n.r(t);var i=n(/*! -!../../../../node_modules/babel-loader/lib!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!../../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../node_modules/vue-loader/lib??vue-loader-options!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader??ref--0-1!../../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js& */773),a=n.n(i);for(var r in i)"default"!==r&&function(e){n.d(t,e,function(){return i[e]})}(r);t.default=a.a},773:
/*!***********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/babel-loader/lib!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!./node_modules/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader??ref--0-1!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./src/plugins/check_in/index/index.vue?vue&type=script&lang=js& ***!
  \***********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */function(e,t,n){"use strict";(function(e){function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r={data:function(){return{month:1,year:1990,everyday:[],config:{total:[],continue:[]},user:{},result:{},other_height:"500rpx",now:1,noday:["","","","","","","",""],week:1,date:[],getRed:!1,customize:null,page_loading:!0,template_message:!1,success:!1}},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(n,!0).forEach(function(t){a(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},(0,n(/*! vuex */12).mapState)({userInfo:function(e){return e.user.info},mallImg:function(e){return e.mallConfig.__wxapp_img.mall},checkImg:function(e){return e.mallConfig.plugin.check_in}})),methods:{toRules:function(){e.navigateTo({url:"/pages/rules/index?url=".concat(encodeURIComponent(this.$api.check_in.index),"&keys=").concat(JSON.stringify(["config","rule"]))})},toIndex:function(){e.redirectTo({url:"/pages/index/index"})},getSetting:function(){var t=this;t.$request({url:t.$api.check_in.customize}).then(function(n){0==n.code?(t.customize=n.data.list,t.getList()):(t.$hideLoading(),e.showToast({title:n.msg,icon:"none",duration:1e3}))}).catch(function(e){t.$hideLoading()})},getList:function(){var t=this;t.$request({url:t.$api.check_in.index}).then(function(n){t.$hideLoading(),0==n.code?(t.config=n.data.config,t.user=n.data.check_in_user,t.template_message=n.data.template_message,t.getEveryday()):e.showToast({title:n.msg,icon:"none",duration:1e3})}).catch(function(e){t.$hideLoading()})},getEveryday:function(){var e=this.month,t=this.year,n=32,i=[];e<8&&e%2==0&&2!=e?n=31:e>7&&e%2==1?n=31:2==e&&(n=t%4==0&&t%100!=0?30:29);for(var a=1;a<n;a++)i.push({date:a,check:!1});for(var r=this.noday,o=this.week,c=0;c<o;c++)i.unshift(r[c]);if(i.length%7!=0)for(var s=7-i.length%7,u=0;u<s;u++)i.push(r[u]);this.everyday=i,this.getDay(t,e)},getDay:function(t,n){var i=this;i.$request({url:i.$api.check_in.sign_in_day,data:{month:n,year:t}}).then(function(t){if(i.$hideLoading(),0==t.code){var n=t.data.check_in_day,a=!0,r=!1,o=void 0;try{for(var c,s=i.everyday[Symbol.iterator]();!(a=(c=s.next()).done);a=!0){var u=c.value;if(u){u.check=!1;var h=!0,d=!1,l=void 0;try{for(var f,g=n[Symbol.iterator]();!(h=(f=g.next()).done);h=!0){f.value==u.date&&(u.check=!0)}}catch(e){d=!0,l=e}finally{try{h||null==g.return||g.return()}finally{if(d)throw l}}}}}catch(e){r=!0,o=e}finally{try{a||null==s.return||s.return()}finally{if(r)throw o}}i.$forceUpdate()}else e.showToast({title:t.msg,icon:"none",duration:1e3})}).catch(function(e){i.$hideLoading()})},lose:function(){var e=this.month-1,t=this.year,n=this.now;e<1&&(e=12,t--);var i=t+"-"+e+"-01",a=new Date(Date.parse(i.replace(/-/g,"/")));this.week=a.getDay();var r=new Date,o=r.getFullYear(),c=r.getMonth()+1;n=t==o?e>c?0:e<c?32:r.getDate():t>o?0:32,this.year=t,this.month=e,this.now=n,this.getEveryday()},add:function(){var e=this.month+1,t=this.year,n=this.now;e>12&&(e=1,t++);var i=t+"-"+e+"-01",a=new Date(Date.parse(i.replace(/-/g,"/")));this.week=a.getDay();var r=new Date,o=r.getFullYear(),c=r.getMonth()+1;n=t==o?e>c?0:e<c?32:r.getDate():t>o?0:32,this.year=t,this.month=e,this.now=n,this.getEveryday()},subscribe:function(){var e=this;this.$subscribe(this.template_message).then(function(t){e.getAward(1)}).catch(function(t){e.getAward(1)})},getAward:function(t,n){var i=this;e.showLoading({mask:!0,title:1==t?"签到中...":"领取中..."}),i.$request({url:i.$api.check_in.sign_in,data:{status:t,day:n||1}}).then(function(t){if(0==t.code){var n=t.data.queueId,a=t.data.token;i.checkInResult(n,a)}else e.hideLoading(),e.showToast({title:t.msg,icon:"none",duration:1e3})}).catch(function(a){e.hideLoading(),i.$event.on(i.$const.EVENT_USER_LOGIN).then(function(){i.$store.dispatch("user/info"),i.getAward(t,n)})})},checkInResult:function(t,n){var i=this;i.$request({url:i.$api.check_in.sign_in_result,data:{queueId:t,token:n}}).then(function(a){e.hideLoading(),0==a.code?1==a.data.retry?i.checkInResult(t,n):(i.result=a.data,"integral"==i.result.type?i.success=!0:"balance"==i.result.type&&(i.getRed=!0)):e.showToast({title:a.msg,icon:"none",duration:1e3})}).catch(function(t){e.hideLoading()})},changeSwitch:function(){0==this.user.is_remind&&this.$subscribe(this.template_message)},toSwitch:function(t){var n=this,i=this,a=0;t.detail.value&&(a=1),i.$request({url:i.$api.check_in.user,data:{is_remind:a}}).then(function(t){i.$hideLoading(),0==t.code?n.user.is_remind=a:e.showToast({title:t.msg,icon:"none",duration:1e3})}).catch(function(e){i.$hideLoading()})},close:function(){this.success=!1,this.getRed=!1,this.getList()}},onShareAppMessage:function(){return this.$shareAppMessage({title:this.$children[0].navigationBarTitle,path:"/plugins/check_in/index/index"})},onShareTimeline:function(){return this.$shareTimeline({title:this.$children[0].navigationBarTitle,query:{}})},onLoad:function(){this.$commonLoad.onload();var e=this;wx.getSystemInfo({success:function(t,n){e.other_height=2*t.windowHeight-500+"rpx"}});var t=new Date;e.year=t.getFullYear(),e.month=t.getMonth()+1,e.now=t.getDate();var n=e.year+"-"+e.month+"-01",i=new Date(Date.parse(n.replace(/-/g,"/")));e.week=i.getDay(),wx.showShareMenu({menus:["shareAppMessage","shareTimeline"]}),e.$showLoading({type:"global",text:"加载中..."}),e.getSetting()}};t.default=r}).call(this,n(/*! ./node_modules/@dcloudio/uni-mp-weixin/dist/index.js */1).default)},774:
/*!********************************************************************************************************!*\
  !*** ./src/plugins/check_in/index/index.vue?vue&type=style&index=0&id=259b3f2c&scoped=true&lang=scss& ***!
  \********************************************************************************************************/
/*! no static exports found */function(e,t,n){"use strict";n.r(t);var i=n(/*! -!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--8-oneOf-1-1!../../../../node_modules/css-loader??ref--8-oneOf-1-2!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src??ref--8-oneOf-1-3!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--8-oneOf-1-5!../../../../node_modules/vue-loader/lib??vue-loader-options!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader??ref--0-1!../../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&id=259b3f2c&scoped=true&lang=scss& */775),a=n.n(i);for(var r in i)"default"!==r&&function(e){n.d(t,e,function(){return i[e]})}(r);t.default=a.a},775:
/*!*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--8-oneOf-1-1!./node_modules/css-loader??ref--8-oneOf-1-2!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/src??ref--8-oneOf-1-3!./node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--8-oneOf-1-5!./node_modules/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader??ref--0-1!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./src/plugins/check_in/index/index.vue?vue&type=style&index=0&id=259b3f2c&scoped=true&lang=scss& ***!
  \*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */function(e,t,n){}},[[768,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../../.sourcemap/mp-weixin/plugins/check_in/index/index.js.map