(global.webpackJsonp=global.webpackJsonp||[]).push([["pages/app_admin/add-goods/add-goods"],{18:
/*!*********************************!*\
  !*** external "../siteinfo.js" ***!
  \*********************************/
/*! no static exports found */function(e,t){e.exports=require("../siteinfo.js")},941:
/*!*****************************************************!*\
  !*** ./src/pages/app_admin/add-goods/add-goods.vue ***!
  \*****************************************************/
/*! no static exports found */function(e,t,i){"use strict";i.r(t);var r=i(/*! ./add-goods.vue?vue&type=template&id=a412b85a&scoped=true&filter-modules=%7B%7D& */942),o=i(/*! ./add-goods.vue?vue&type=script&lang=js& */944);for(var s in o)"default"!==s&&function(e){i.d(t,e,function(){return o[e]})}(s);i(/*! ./add-goods.vue?vue&type=style&index=0&id=a412b85a&scoped=true&lang=scss& */946);var a=i(/*! ../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js */10),n=Object(a.default)(o.default,r.render,r.staticRenderFns,!1,null,"a412b85a",null);n.options.__file="src/pages/app_admin/add-goods/add-goods.vue",t.default=n.exports},942:
/*!**********************************************************************************************************************!*\
  !*** ./src/pages/app_admin/add-goods/add-goods.vue?vue&type=template&id=a412b85a&scoped=true&filter-modules=%7B%7D& ***!
  \**********************************************************************************************************************/
/*! exports provided: render, staticRenderFns */function(e,t,i){"use strict";i.r(t);var r=i(/*! -!../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--15-0!../../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../node_modules/vue-loader/lib??vue-loader-options!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader??ref--0-1!../../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./add-goods.vue?vue&type=template&id=a412b85a&scoped=true&filter-modules=%7B%7D& */943);i.d(t,"render",function(){return r.render}),i.d(t,"staticRenderFns",function(){return r.staticRenderFns})},943:
/*!********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--15-0!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!./node_modules/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader??ref--0-1!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./src/pages/app_admin/add-goods/add-goods.vue?vue&type=template&id=a412b85a&scoped=true&filter-modules=%7B%7D& ***!
  \********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! exports provided: render, staticRenderFns */function(e,t,i){"use strict";i.r(t),i.d(t,"render",function(){return r}),i.d(t,"staticRenderFns",function(){return o});var r=function(){var e=this,t=e.$createElement;e._self._c;e._isMounted||(e.e0=function(t){e.set_attr=!e.set_attr},e.e1=function(t){e.is_default_services=!e.is_default_services})},o=[];r._withStripped=!0},944:
/*!******************************************************************************!*\
  !*** ./src/pages/app_admin/add-goods/add-goods.vue?vue&type=script&lang=js& ***!
  \******************************************************************************/
/*! no static exports found */function(e,t,i){"use strict";i.r(t);var r=i(/*! -!../../../../node_modules/babel-loader/lib!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!../../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../node_modules/vue-loader/lib??vue-loader-options!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader??ref--0-1!../../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./add-goods.vue?vue&type=script&lang=js& */945),o=i.n(r);for(var s in r)"default"!==s&&function(e){i.d(t,e,function(){return r[e]})}(s);t.default=o.a},945:
/*!******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/babel-loader/lib!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!./node_modules/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader??ref--0-1!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./src/pages/app_admin/add-goods/add-goods.vue?vue&type=script&lang=js& ***!
  \******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */function(e,t,i){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(i(/*! ./node_modules/@babel/runtime/regenerator */24)),o=i(/*! vuex */12),s=a(i(/*! @/core/upload.js */522));function a(e){return e&&e.__esModule?e:{default:e}}function n(e,t,i,r,o,s,a){try{var n=e[s](a),d=n.value}catch(e){return void i(e)}n.done?t(d):Promise.resolve(d).then(r,o)}function d(e){return function(){var t=this,i=arguments;return new Promise(function(r,o){var s=e.apply(t,i);function a(e){n(s,r,o,a,d,"next",e)}function d(e){n(s,r,o,a,d,"throw",e)}a(void 0)})}}function c(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,r)}return i}function g(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var h,l,u={data:function(){return{postageIndex:-1,deliveryIndex:-1,height:0,give_integral:0,forehead_integral:0,windowHeight:0,beSubmit:!1,inputName:!0,form:{cats:[],name:"",cost_price:"",price:"",original_price:"",type:"goods",plugin_data:{ecard:{ecard_id:0}},attr_default_name:"默认规格"},cats:[],forehead:-1,unit:"件",iphone_x:!1,set_attr:!1,is_default_services:!0,modal:!1,error:!1,set_cat:!1,set_postage:!1,set_delivery:!1,set_service:!1,set_card:!1,confine:!1,is_service:!1,goods_card:[],img:[],card:[],goods_detail:[],beMove:!1,service:[],postage:[],delivery:[],bePostage:"",beDelivery:"",beService:[],default_service:[],newIndex:"0",index:"0",attr:!1,have_children:!1,disabled:!0,imgHidden:!0,flag:!1,x:0,y:0,id:0,first_service:!0,choose_list:[],elements:[],img_src:"",dialog:!1,loading:!1,ecard_dialog:!1,is_ecard:0,ecard_api_url:"",ecardBePostage:"",ecard_postage:[],ecard_set_postage:!1,ecard_postageIndex:-1,beginIndex:null,dialogType:"",limit_buy_status:0,min_number:1,limit_buy_first:!0,limit_buy_second:!0,limit_buy_type:"day",limit_buy_value:-1}},computed:function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?c(i,!0).forEach(function(t){g(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):c(i).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}({},(0,o.mapState)({userInfo:function(e){return e.user.info},adminImg:function(e){return e.mallConfig.__wxapp_img.app_admin}})),methods:{changeConfine:function(){this.confine=!this.confine,this.form.limit_buy_status=this.confine?1:0},money:function(e){var t=e.toString();return 0==t.indexOf(".")&&(t="0"+t),(t=(t=(t=(t=t.replace(/[^\d.]/g,"")).replace(/\.{2,}/g,".")).replace(".","$#$").replace(/\./g,"").replace("$#$",".")).replace(/^(\-)*(\d+)\.(\d\d).*$/,"$1$2.$3")).indexOf(".")<0&&""!=t&&(t=parseFloat(t)),+t},costChange:function(e){this.form.cost_price=this.money(e.detail.value)},originalChange:function(e){this.form.original_price=this.money(e.detail.value)},priceChange:function(e){this.form.price=this.money(e.detail.value)},nameBlur:function(){this.inputName=!this.inputName},catchTouchMove:function(){return!1},toSubmit:function(){var t=this;if(t.loading)return!1;e.showLoading({mask:!0,title:"提交中..."}),t.loading=!0,t.beSubmit=!1,t.$request({url:t.$api.app_admin.edit,data:{form:JSON.stringify(t.form),attrGroups:JSON.stringify(t.form.attr_groups)},method:"post"}).then(function(i){t.loading=!1,t.$hideLoading(),e.hideLoading(),t.loading=!1,0==i.code&&0==i.code?(e.showToast({title:i.msg,duration:1e3}),setTimeout(function(){e.navigateBack()},500)):e.showToast({title:i.msg,icon:"none",duration:1e3})}).catch(function(i){t.loading=!1,t.$hideLoading(),e.hideLoading()})},submit:function(e){var t=!1,i=this.form,r=[];if(!(this.img.length>0))return this.error="请上传商品图片",!1;if(i.pic_url=this.img,!i.name)return this.error="请设置商品名称",!1;if(0==this.cats.length)return this.error="请设置商品分类",!1;for(var o in this.cats)r.push(this.cats[o].value);if(!this.unit)return this.error="请设置商品单位",!1;if(i.unit=this.unit,0!=i.cost_price&&!i.cost_price)return this.error="请设置商品成本价",!1;if(i.cost_price<0)return this.error="成本价不得小于零",!1;if(0!=i.original_price&&!i.original_price)return this.error="请设置商品原价",!1;if(i.original_price<0)return this.error="商品原价不得小于零",!1;if(0!=i.price&&!i.price)return this.error="请设置商品售价",!1;if(this.set_attr){if(i.use_attr=1,i.goods_num=0,!i.attr_groups||0==i.attr_groups.length)return this.error="请设置商品规格",!1;t=!0}else{if(i.use_attr=0,i.attr=[],!i.goods_num)return this.error="商品库存不得为空",!1;if(i.goods_num<0)return this.error="商品库存不得小于零",!1;t=!0}if(i.cards=this.goods_card,i.is_default_services=1,i.services=[],this.form.limit_buy_status=this.confine?1:0,0==this.is_default_services&&(i.is_default_services=0,this.beService.length>0&&(i.services=this.beService)),i.status=e,!(this.goods_detail.length>0))return this.error="请设置图文描述",!1;for(var s in i.detail="",this.goods_detail)"img"==this.goods_detail[s].type?i.detail+='<p><img src="'+this.goods_detail[s].pic_url+'"/></p>':"line"==this.goods_detail[s].type?i.detail+='<p><img src="'+this.adminImg.line+'"/></p>':"text"==this.goods_detail[s].type&&(i.detail+="<p>"+this.goods_detail[s].text+"</p>");i.mchCats||(i.mchCats=[]),this.forehead_integral&&(this.forehead_integral>0?(i.forehead_integral_type=1,i.forehead_integral=this.forehead_integral):(i.forehead_integral_type=2,i.forehead_integral=this.forehead_integral.replace("%",""))),this.give_integral&&(this.give_integral>0?(i.give_integral_type=1,i.give_integral=this.give_integral):(i.give_integral_type=2,i.give_integral=this.give_integral.replace("%",""))),i.virtual_sales||(i.virtual_sales=0),i.cover_pic||(i.cover_pic=""),i.sort||(i.sort=100),i.accumulative||(i.accumulative=1),i.member_price||(i.member_price={}),i.freight_id=this.bePostage.id,i.freight=this.bePostage,i.shipping_id=this.beDelivery.id,i.shipping=this.beDelivery,i.individual_share||(i.individual_share=0),i.is_level||(i.is_level=0),i.individual_share||(i.individual_share=0),i.video_url||(i.video_url=""),t&&(this.form=i,this.form.cats=r,this.id>0&&(this.form.id=this.id),0==e?this.toSubmit():this.beSubmit=!0)},close:function(){this.error=null,this.modal=!1,this.beSubmit=!1},inputAttr:function(e){this.attr[e].attr_list[0].attr_id=(+e+2).toString()},_longtap:function(t,i,r){var o=this;e.createSelectorQuery().selectAll(".move-img").fields({dataset:!0,rect:!0},function(e){o.elements=e}).exec(),o.img[i].pic_url="",o.x=r.currentTarget.offsetLeft,o.y=r.currentTarget.offsetTop,o.imgHidden=!1,o.flag=!0,o.beMove=!0,o.img_src=t,o.beginIndex=i},touchend:function(e){if(this.flag){for(var t=e.changedTouches[0].pageX,i=e.changedTouches[0].pageY,r=this.elements,o=this.img,s=this.beginIndex,a=0;a<r.length;a++){var n=r[a];if(t>n.left&&t<n.right&&i>n.top&&i<n.bottom){var d=n.dataset.index;if(s<d){for(var c=o[s],g=s;g<d;g++)o[g]=o[g+1];o[d]=c}if(s>d){for(var h=o[s],l=s;l>d;l--)o[l]=o[l-1];o[d]=h}o[d].pic_url=this.img_src,this.img=o}}this.img[s].pic_url||(this.img[s].pic_url=this.img_src),this.imgHidden=!0,this.flag=!1,this.beMove=!1,this.beginIndex=null}},touchm:function(e){if(this.flag){var t=e.touches[0].pageX,i=e.touches[0].pageY;this.x=t-60,this.y=i-189}},cancelService:function(){var t=this.beService,i=this.service;t.length>0?i.forEach(function(e,i){e.isChoose=!1,t.forEach(function(t){t.id==e.id&&(e.isChoose=!0)})}):i.forEach(function(e,t){e.isChoose=!1}),this.beService=t,this.service=i,this.set_service=!1,this.is_service=!1,setTimeout(function(t){e.pageScrollTo({scrollTop:45550,duration:0})},0)},submitService:function(){var t=[];this.service.forEach(function(e){e.isChoose&&t.push(e)}),this.beService=t,this.set_service=!1,this.is_service=!1,setTimeout(function(t){e.pageScrollTo({scrollTop:45550,duration:0})},0)},choose:function(e){var t=this;t.service.forEach(function(i){i.id==e.id&&(i.isChoose=!i.isChoose,t.$forceUpdate())})},toGoodsDetail:function(){e.navigateTo({url:"/pages/app_admin/goods-detail/goods-detail"})},addImg:function(){var t=this,i=9-t.img.length;e.chooseImage({count:i,sizeType:["original","compressed"],sourceType:["album","camera"],success:function(i){var r=i.tempFilePaths,o=t.img;r.forEach(function(i,a){e.showLoading({mask:!0,title:"上传中..."});(0,s.default)({url:t.$api.upload.file,filePath:i,fileType:"image",fileName:"",mch_id:0}).then(function(i){var s;0===(s=JSON.parse(i.data)).code&&o.push({pic_url:s.data.url,id:s.data.id}),t.img=o,a===r.length-1&&e.hideLoading()}).catch(function(t){t&&t.errMsg&&e.showModal({title:"错误",content:t.errMsg,showCancel:!1})})})}})},del_img:function(e){this.img.splice(e,1)},chooseCat:function(){e.navigateTo({url:"/pages/goods-edit/goods-cat/goods-cat"})},chooseAttr:function(){e.navigateTo({url:"/pages/app_admin/goods-attr/goods-attr"}),this.$storage.setStorageSync("goods_unit",this.unit)},bindChange:function(e){this.newIndex=e.detail.value[0]},toggle:function(e){this.choose_list=[],this.dialog=!1,this.set_cat=!1,"postage"==this.dialogType&&(1==e?this.set_postage&&(this.bePostage=this.postage[this.newIndex]):this.set_postage=!1),"delivery"==this.dialogType&&(1==e?this.set_delivery&&(this.beDelivery=this.delivery[this.newIndex]):this.set_delivery=!1),this.dialogType=""},chooseService:function(){var t=this;t.first_service?t.$request({url:t.$api.app_admin.service}).then(function(i){if(t.$hideLoading(),0==i.code){t.service=i.data.list,0==i.data.list.length?t.modal=!0:t.is_service=!0;var r=[],o=!0,s=!1,a=void 0;try{for(var n,d=i.data.list[Symbol.iterator]();!(o=(n=d.next()).done);o=!0){var c=n.value;c.isChoose=!1,1==c.is_default&&(r.push(c),c.isChoose=!0)}}catch(e){s=!0,a=e}finally{try{o||null==d.return||d.return()}finally{if(s)throw a}}t.set_service=!0,t.beService=r,t.default_service=r,t.first_service=!1}else e.showToast({title:i.msg,icon:"none",duration:1e3})}).catch(function(){t.$hideLoading()}):0==t.service.length?t.modal=!0:t.is_service=!0},chooseCard:function(){var t=this;t.$request({url:t.$api.app_admin.card}).then(function(i){t.$hideLoading(),0==i.code?(t.card=i.data.list,0==i.data.list.length?(t.set_card=!0,t.modal=!0):e.navigateTo({url:"/pages/app_admin/goods-card/goods-card"})):e.showToast({title:i.msg,icon:"none",duration:1e3})}).catch(function(){t.$hideLoading()})},chooseDelivery:function(){var t=this;t.$request({url:t.$api.app_admin.delivery_rules}).then(function(i){if(t.$hideLoading(),0==i.code)if(0==i.data.list.length)t.set_delivery=!0,t.modal=!0,t.delivery=i.data.list;else{var r=[];i.data.list.forEach(function(e,t){r.push(i.data.list[t].id)});var o=r.indexOf(t.beDelivery.id);o>-1?(t.deliveryIndex=o,t.newIndex=o):t.beDelivery="",t.set_delivery=!0,t.dialog=!0,t.dialogType="delivery",t.delivery=i.data.list}else e.showToast({title:i.msg,icon:"none",duration:1e3})}).catch(function(){t.$hideLoading()})},chooseExpress:function(){var t=this;t.$request({url:t.$api.app_admin.postage}).then(function(i){if(t.$hideLoading(),0==i.code)if(0==i.data.list.length)t.set_postage=!0,t.modal=!0,t.postage=i.data.list;else{var r=[];i.data.list.forEach(function(e,t){r.push(i.data.list[t].id)});var o=r.indexOf(t.bePostage.id);o>-1?(t.postageIndex=o,t.newIndex=o):t.bePostage="",t.set_postage=!0,t.dialog=!0,t.dialogType="postage",t.postage=i.data.list}else e.showToast({title:i.msg,icon:"none",duration:1e3})}).catch(function(){t.$hideLoading()})},getService:function(t){var i=this;this.$request({url:this.$api.app_admin.service}).then(function(r){i.$hideLoading();var o=r.code,s=r.data,a=r.msg;if(0===o){for(var n in i.service=s.list,i.service)i.service[n].isChoose=!1;if(t>0)for(var d in i.beService)for(var c in i.service)i.service[c].id==i.beService[d].id&&(i.service[c].isChoose=!0,i.first_service=!1);else i.beService=[],s.list.forEach(function(e){e.isChoose=!1,1==e.is_default&&(i.beService.push(e),e.isChoose=!0)})}else e.showToast({title:a,icon:"none",duration:1e3})}).catch(function(){i.$hideLoading()})},getPostage:function(t){var i=this;this.$request({url:this.$api.app_admin.postage}).then(function(r){if(i.$hideLoading(),0==r.code){if(i.postage=r.data.list,t>0)return!1;i.bePostage="",i.bePostage=r.data.list[0]}else e.showToast({title:r.msg,icon:"none",duration:1e3})}).catch(function(){i.$hideLoading()})},getDelivery:function(t){var i=this;this.$request({url:this.$api.app_admin.delivery_rules}).then(function(r){if(i.$hideLoading(),0==r.code){if(i.delivery=r.data.list,t>0)return!1;i.beDelivery="",i.beDelivery=r.data.list[0]}else e.showToast({title:r.msg,icon:"none",duration:1e3})}).catch(function(){i.$hideLoading()})},getCard:function(){var t=this;this.$request({url:this.$api.app_admin.card}).then(function(i){t.$hideLoading(),0==i.code?t.card=i.data.list:e.showToast({title:i.msg,icon:"none",duration:1e3})}).catch(function(){t.$hideLoading()})},getDetail:(l=d(r.default.mark(function t(i){var o,s,a,n,d,c,g,h,l,u,f,_,p,v,m,y,b,S,$,x,w,O,T,P,C,L,I,D,j,E,q;return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$request({url:this.$api.app_admin.goods_edit,data:{id:i}});case 2:return o=t.sent,s=o.code,a=o.data,n=o.msg,t.next=6,this.$hideLoading();case 6:if(this.getService(i),this.getPostage(i),this.getDelivery(i),0===s){for(j in this.form=a.detail,d=this.form,c=d.pic_url,g=d.cats,h=d.use_attr,l=d.services,u=d.freight,f=d.cards,_=d.confine_count,p=d.is_default_services,v=d.forehead_integral,m=d.forehead_integral_type,y=d.give_integral,b=d.give_integral_type,S=d.attr_groups,$=d.attr,x=d.detail,w=d.unit,O=d.shipping,T=d.min_number,P=d.limit_buy_status,d.limit_buy_type,C=d.limit_buy_value,this.img=c,this.cats=g,this.set_attr=1==h,this.beService=l,this.bePostage=u,this.beDelivery=O,this.goods_card=f,this.unit=w,this.min_number=T,1==P&&(this.confine=!0),_>0&&(this.limit_buy_first=!1),C>0&&(this.limit_buy_second=!1),0==p&&(this.is_default_services=!1),this.forehead_integral=+v,2==m&&(this.forehead_integral=v+"%"),this.give_integral=+y,2==b&&(this.give_integral=y+"%"),S.length>0&&$.length>0&&(this.attr=!0,this.$storage.setStorageSync("goods_attr_groups",S),this.$storage.setStorageSync("goods_attr",$)),L=x.split(/<\/p>|<br\/>|<img /),I=[],D=void 0,L)L[j]=L[j].replace(/<p>/g,"").replace(/<\/p>/g,""),D={type:""},L[j].indexOf("src")>-1?(D.type="img",D.id="",E=L[j].indexOf(".png")>-1?L[j].indexOf(".png")+4:L[j].length-1,L[j].indexOf(".jpg")>-1&&(E=L[j].indexOf(".jpg")+4),L[j].indexOf(".jpeg")>-1&&(E=L[j].indexOf(".jpeg")+5),L[j].indexOf(".gif")>-1&&(E=L[j].indexOf(".gif")+4),D.pic_url=L[j].slice(L[j].indexOf("http"),E)):(D.type="text",D.text=L[j]),I[j]=D;for(q in I)""===I[q].text&&I.splice(q,1);this.goods_detail=I,this.$storage.setStorageSync("goods_card",f),this.$storage.setStorageSync("goods_cat",this.cats),this.$storage.setStorageSync("goods_detail",I)}else e.showToast({title:n,icon:"none",duration:1e3});case 10:case"end":return t.stop()}},t,this)})),function(e){return l.apply(this,arguments)}),chooseECard:function(){var t=this;0===this.id&&this.$request({url:this.$api.app_admin.ecard_api_url+this.ecard_api_url}).then(function(i){var r=i.code,o=i.data,s=i.msg;if(t.$hideLoading(),0===r)if(0===o.length)t.ecard_set_postage=!0,t.ecard_postage=o;else{var a=[];o.forEach(function(e,t){a.push(o[t].id)});var n=a.indexOf(t.form.plugin_data.ecard.ecard_id);n>-1?(t.ecard_postageIndex=n,t.newIndex=n):t.form.plugin_data.ecard={ecard_id:0,name:""},t.ecard_set_postage=!0,t.ecard_dialog=!0,t.ecard_postage=o}else e.showToast({title:s,icon:"none",duration:1e3})}).catch(function(){t.$hideLoading()})},typeChange:function(e){0===this.id&&(this.form.type=e.target.value)},getGoodsConfig:(h=d(r.default.mark(function e(){var t;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$request({url:this.$api.app_admin.goods_config});case 2:0===(t=e.sent).code&&(this.is_ecard=t.data.is_ecard,this.ecard_api_url=t.data.ecard_api_url);case 4:case"end":return e.stop()}},e,this)})),function(){return h.apply(this,arguments)}),ecardToggle:function(e){this.ecard_dialog=!1,1==e?this.ecard_set_postage&&(this.form.plugin_data.ecard={ecard_id:this.ecard_postage[this.newIndex].id,name:this.ecard_postage[this.newIndex].name}):this.ecard_set_postage=!1},limitBuyFirstChange:function(e){"1"===e.target.value?(this.limit_buy_first=!0,this.form.confine_count=-1):(this.limit_buy_first=!1,this.form.confine_count="")}},onLoad:function(t){this.$commonLoad.onload(t);var i=this;e.getSystemInfo({success:function(e){i.windowHeight=e.windowHeight,(e.model.indexOf("iPhone X")>-1||e.model.indexOf("iPhone 11")>-1||e.model.indexOf("iPhone11")>-1||e.model.indexOf("iPhone12")>-1||e.model.indexOf("Unknown Device")>-1)&&(i.iphone_x=!0)}}),e.getSystemInfo({success:function(e){var t=e.windowHeight,r=750/e.windowWidth;i.height=t*r}}),i.getCard(),i.getGoodsConfig(),this.$storage.removeStorageSync("goods_card"),this.$storage.removeStorageSync("goods_cat"),this.$storage.removeStorageSync("goods_unit"),this.$storage.removeStorageSync("goods_attr_groups"),this.$storage.removeStorageSync("goods_attr"),this.$storage.removeStorageSync("temp_attr"),this.$storage.removeStorageSync("temp_attr_info"),this.$storage.removeStorageSync("goods_detail"),i.goods_card=[],i.goods_detail=[],t.id>0?(i.$showLoading({type:"global",text:"加载中..."}),i.id=t.id,setTimeout(function(){e.setNavigationBarTitle({title:"编辑商品"}),i.getDetail(t.id)},500)):(i.getService(),i.getPostage(),i.getDelivery())},onShow:function(){this.goods_card=this.$storage.getStorageSync("goods_card")?this.$storage.getStorageSync("goods_card"):[],this.cats=this.$storage.getStorageSync("goods_cat")?this.$storage.getStorageSync("goods_cat"):[],this.goods_detail=this.$storage.getStorageSync("goods_detail")?this.$storage.getStorageSync("goods_detail"):[],this.form.attr=this.$storage.getStorageSync("goods_attr")?this.$storage.getStorageSync("goods_attr"):[],this.$storage.getStorageSync("goods_attr_groups")&&(this.form.attr_groups=this.$storage.getStorageSync("goods_attr_groups"),this.attr=!0),this.$storage.removeStorageSync("temp_attr"),this.$storage.removeStorageSync("temp_attr_info")},watch:{"form.type":{handler:function(e){"goods"===e&&(this.form.plugin_data.ecard.ecard_id=0,this.form.plugin_data.ecard.name="")},deep:!0}}};t.default=u}).call(this,i(/*! ./node_modules/@dcloudio/uni-mp-weixin/dist/index.js */1).default)},946:
/*!***************************************************************************************************************!*\
  !*** ./src/pages/app_admin/add-goods/add-goods.vue?vue&type=style&index=0&id=a412b85a&scoped=true&lang=scss& ***!
  \***************************************************************************************************************/
/*! no static exports found */function(e,t,i){"use strict";i.r(t);var r=i(/*! -!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--8-oneOf-1-1!../../../../node_modules/css-loader??ref--8-oneOf-1-2!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src??ref--8-oneOf-1-3!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--8-oneOf-1-5!../../../../node_modules/vue-loader/lib??vue-loader-options!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader??ref--0-1!../../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./add-goods.vue?vue&type=style&index=0&id=a412b85a&scoped=true&lang=scss& */947),o=i.n(r);for(var s in r)"default"!==s&&function(e){i.d(t,e,function(){return r[e]})}(s);t.default=o.a},947:
/*!********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--8-oneOf-1-1!./node_modules/css-loader??ref--8-oneOf-1-2!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/src??ref--8-oneOf-1-3!./node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--8-oneOf-1-5!./node_modules/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader??ref--0-1!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./src/pages/app_admin/add-goods/add-goods.vue?vue&type=style&index=0&id=a412b85a&scoped=true&lang=scss& ***!
  \********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */function(e,t,i){}},[[940,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../../.sourcemap/mp-weixin/pages/app_admin/add-goods/add-goods.js.map