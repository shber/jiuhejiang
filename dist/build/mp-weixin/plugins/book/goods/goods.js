(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["plugins/book/goods/goods"],{"0fd4":function(e,o,n){"use strict";var t=n("e675"),i=n.n(t);i.a},"5c05":function(e,o,n){"use strict";var t=function(){var e=this,o=e.$createElement;e._self._c},i=[];n.d(o,"a",function(){return t}),n.d(o,"b",function(){return i})},"82f3":function(e,o,n){"use strict";n.r(o);var t=n("9fe9"),i=n.n(t);for(var s in t)"default"!==s&&function(e){n.d(o,e,function(){return t[e]})}(s);o["default"]=i.a},"91f4":function(e,o,n){"use strict";n.r(o);var t=n("5c05"),i=n("82f3");for(var s in i)"default"!==s&&function(e){n.d(o,e,function(){return i[e]})}(s);n("0fd4");var r=n("2877"),c=Object(r["a"])(i["default"],t["a"],t["b"],!1,null,"0317ed28",null);o["default"]=c.exports},"9fe9":function(e,o,n){"use strict";(function(e){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var t=n("2f62");function i(e,o){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);o&&(t=t.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,t)}return n}function s(e){for(var o=1;o<arguments.length;o++){var n=null!=arguments[o]?arguments[o]:{};o%2?i(n,!0).forEach(function(o){r(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(n).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function r(e,o,n){return o in e?Object.defineProperty(e,o,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[o]=n,e}var c=function(){return n.e("components/page-component/goods/app-goods-banner").then(n.bind(null,"12b6"))},a=function(){return n.e("plugins/book/components/app-store").then(n.bind(null,"f09e"))},u=function(){return n.e("components/page-component/app-related-suggestion-product/app-related-suggestion-product").then(n.bind(null,"1ce4"))},d=function(){return n.e("components/page-component/app-quick-navigation/app-quick-navigation").then(n.bind(null,"4d92"))},p=function(){return Promise.all([n.e("common/vendor"),n.e("components/page-component/app-vip-card/app-vip-card")]).then(n.bind(null,"19f0"))},l=function(){return n.e("components/page-component/goods/app-goods-full-reduce").then(n.bind(null,"6132"))},g=function(){return Promise.all([n.e("common/vendor"),n.e("components/page-component/goods/u-attr")]).then(n.bind(null,"b4bc"))},f=function(){return n.e("components/page-component/goods/bd-info").then(n.bind(null,"0e01"))},m=function(){return Promise.all([n.e("common/vendor"),n.e("components/page-component/goods/bd-coupon")]).then(n.bind(null,"11b2"))},h=function(){return n.e("components/page-component/goods/bd-xbc").then(n.bind(null,"8639"))},b=function(){return n.e("components/page-component/goods/bd-kb").then(n.bind(null,"4c29"))},_=function(){return n.e("components/page-component/goods/bd-hc").then(n.bind(null,"de37"))},v=function(){return n.e("components/page-component/goods/bd-detail").then(n.bind(null,"3e70"))},w=function(){return n.e("components/page-component/goods/bd-comments").then(n.bind(null,"9470"))},k=function(){return n.e("components/basic-component/app-close/app-close").then(n.bind(null,"f0dd"))},y=function(){return n.e("components/page-component/goods/bd-service").then(n.bind(null,"861b"))},O={name:"goods",components:{"app-goods-banner":c,"app-store":a,"app-related-suggestion-product":u,"app-quick-navigation":d,"app-vip-card":p,uAttr:g,appClose:k,appGoodsFullReduce:l,bdName:f,bdCoupon:m,bdXbc:h,bdKb:b,bdHc:_,bdDetail:v,bdComments:w,bdService:y},data:function(){return{showClose:!1,is_open:0,goods:{goods_activity:{full_reduce:{}},goods_marketing:{}},goods_marketing:{},full_reduce:null,selectAttr:{},activeIndex:0,list:[],url:"",webUrl:"",cartShow:!0,is_vip:!1,is_vip_card_user:0,discount:null,goods_id:0,poster_config:this.$api.book.poster_config,poster_generate:this.$api.book.poster_generate,checked:null,show:!1,loading:!1,store:null,storeNum:null,services:null,name:null,goodsId:null,picUrl:null,disable:"disable"}},onShow:function(){var e=this;this.showClose=!1,setTimeout(function(){e.showClose=!0})},onShareTimeline:function(){var e=this.goods,o=e.app_share_title,n=e.goods_id,t=e.name;return this.$shareTimeline({title:o||t,query:{goods_id:n}})},onLoad:function(e){this.$commonLoad.onload(e),this.webUrl="/plugins/book/goods/goods?goods_id="+e.goods_id,this.goods_id=e.goods_id,this.request(e.goods_id),this.newRecommend(e.goods_id),wx.showShareMenu({menus:["shareAppMessage","shareTimeline"]})},onShareAppMessage:function(){this.hShareAppMessage()},methods:{hShareAppMessage:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],o=this.goods,n=o.app_share_title,t=o.app_share_pic,i=o.goods_id,s=o.name,r=o.subtitle;return this.$shareAppMessage({path:"/plugins/book/goods/goods",title:n||s,imageUrl:t||this.picUrl[0].pic_url,desc:r,params:{goods_id:i}},e)},getMall:function(e){this.is_open=e.is_open},check:function(e){var o=e.item;this.checked=o},rightFunc:function(o){e.navigateTo({url:"/pages/order-submit/order-submit?mch_list=".concat(JSON.stringify([o]),"&preview_url=").concat(encodeURIComponent(this.$api.book.order_preview),"&submit_url=").concat(encodeURIComponent(this.$api.book.order_submit),"&plugin=booking")})},newRecommend:function(e){var o=this;this.$request({url:this.$api.goods.new_recommend,data:{goods_id:e}}).then(function(e){0===e.code&&(o.list=e.data.list)})},open:function(){this.goods.buy_goods_auth?this.show=!0:this.$tips.showToast({title:"您暂无权限购买该商品",icon:"none"})},setCoupon:function(e){this.$set(this.goods.goods_coupon_center[e],"is_receive",1)},router:function(o){e.navigateTo({url:o})},request:function(o){var n=this;e.getLocation({type:"wgs84",success:function(e){n.$showLoading(),n.$request({url:n.$api.book.detail,data:{goods_id:o,latitude:e.latitude,longitude:e.longitude}}).then(function(e){if(0===e.code){var o=e.data.list,t=e.data.list,i=t.store,s=t.services,r=t.name,c=t.id,a=t.pic_url,u=t.goods_marketing;n.item=o,n.goods=o,o.goods_activity&&(n.full_reduce=o.goods_activity.full_reduce),n.store=i.slice(0,1),n.storeNum=i.length,n.services=s,n.name=r,n.goodsId=c,n.picUrl=a,n.goods_marketing=u,n.url="".concat(n.$api.book.poster,"&goods_id=").concat(c),n.poster_config="".concat(n.poster_config,"&goods_id=").concat(c),n.poster_generate="".concat(n.poster_generate,"&goods_id=").concat(c),n.loading=!0,o.vip_card_appoint.discount>0&&(n.is_vip=!0,n.discount=o.vip_card_appoint.discount),n.is_vip_card_user=o.vip_card_appoint.is_vip_card_user}n.$hideLoading()})},fail:function(){e.showToast({title:"请开启位置权限",icon:"none",duration:2e3,success:function(){setTimeout(function(){e.navigateBack()},2e3)}})}})}},computed:s({},(0,t.mapGetters)("mallConfig",{getTheme:"getTheme"}))};o.default=O}).call(this,n("543d")["default"])},ae58:function(e,o){e.exports=require("../siteinfo.js")},e675:function(e,o,n){}},[["6577","common/runtime","common/vendor"]]]);