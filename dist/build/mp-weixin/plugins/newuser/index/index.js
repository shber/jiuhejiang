(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["plugins/newuser/index/index"],{"030d":function(e,t,n){"use strict";n.r(t);var a=n("8bde"),r=n.n(a);for(var o in a)"default"!==o&&function(e){n.d(t,e,function(){return a[e]})}(o);t["default"]=r.a},"6b1b":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement;e._self._c},r=[];n.d(t,"a",function(){return a}),n.d(t,"b",function(){return r})},"8bde":function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n("2f62");function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(n,!0).forEach(function(t){i(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c={data:function(){return{nickname:"",avatarUrl:""}},computed:o({},(0,a.mapState)({userInfo:function(e){return e.user.info},custom_setting:function(e){return e.mallConfig.share_setting_custom},share_setting:function(e){return e.mallConfig.share_setting},mall:function(e){return e.mallConfig.mall}}),{},(0,a.mapGetters)("mallConfig",{getTheme:"getTheme"})),onLoad:function(){},methods:{compareVersion:function(e,t){e=e.split("."),t=t.split(".");var n=Math.max(e.length,t.length);while(e.length<n)e.push("0");while(t.length<n)t.push("0");for(var a=0;a<n;a++){var r=parseInt(e[a]),o=parseInt(t[a]);if(r>o)return 1;if(r<o)return-1}return 0},onChooseAvatar:function(t){var n=this;this.avatarUrl=t.detail.avatarUrl,e.uploadFile({url:n.$api.upload.file,filePath:n.avatarUrl,name:"file",success:function(e){n.avatarUrl=JSON.parse(e.data).data.url}})},getUserInfo:function(){var t=this,n=this;if(console.log(!n.avatarUrl,n.avatarUrl),n.avatarUrl)if(n.nickname){var a={avatar:n.avatarUrl,nickname:n.nickname};e.getUserProfile({desc:"用于完善会员资料",success:function(e){var n=JSON.parse(e.rawData);n.avatarUrl=a.avatar,n.nickName=a.nickname,e.rawData=JSON.stringify(n),e.userInfo.nickName="123",console.log(e),t.getUserInfo2(e)}})}else e.showToast({title:"请输入昵称",icon:"none"});else e.showToast({title:"请上传头像",icon:"none"})},getUserInfo2:function(t){var n=this;e.login({scopes:"auth_base",success:function(a){var r;r={encryptedData:t.encryptedData,iv:t.iv,rawData:t.rawData,signature:t.signature,code:a.code},n.$request({url:n.$api.passport.login,method:"post",data:r}).then(function(t){e.hideLoading(),n.$storage.setStorageSync("_USER_ACCESS_TOKEN",t.data.access_token),e.reLaunch({url:"/pages/index/index"}),e.showToast({title:"登录成功",icon:"none"})}).catch(function(t){e.hideLoading(),reject(t)})},fail:function(e){reject(e)}})}}};t.default=c}).call(this,n("543d")["default"])},a425:function(e,t,n){"use strict";var a=n("a79f"),r=n.n(a);r.a},a79f:function(e,t,n){},edb5:function(e,t,n){"use strict";n.r(t);var a=n("6b1b"),r=n("030d");for(var o in r)"default"!==o&&function(e){n.d(t,e,function(){return r[e]})}(o);n("a425");var i=n("2877"),c=Object(i["a"])(r["default"],a["a"],a["b"],!1,null,"0916d7ea",null);t["default"]=c.exports}},[["75de","common/runtime","common/vendor"]]]);