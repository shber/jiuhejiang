(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["plugins/advance/detail/detail"],{"15c3":function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement;t._self._c},i=[];n.d(e,"a",function(){return o}),n.d(e,"b",function(){return i})},3510:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=n("2f62");function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,o)}return n}function a(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(n,!0).forEach(function(e){s(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var r=function(){return n.e("components/page-component/goods/app-goods-banner").then(n.bind(null,"12b6"))},c=function(){return n.e("plugins/advance/components/detail-ad").then(n.bind(null,"e0a5"))},d=function(){return n.e("plugins/advance/components/detail-price-share").then(n.bind(null,"fe3c"))},u=function(){return Promise.all([n.e("common/vendor"),n.e("plugins/advance/components/detail-bottom-button")]).then(n.bind(null,"5c91"))},p=function(){return n.e("plugins/advance/components/detail-attr").then(n.bind(null,"f471"))},l=function(){return n.e("components/page-component/app-join-member/app-join-member").then(n.bind(null,"40f4"))},g=function(){return n.e("components/page-component/app-related-suggestion-product/app-related-suggestion-product").then(n.bind(null,"1ce4"))},h=function(){return n.e("plugins/advance/components/detail-discount").then(n.bind(null,"c54f"))},m=function(){return n.e("plugins/advance/components/detail-vip").then(n.bind(null,"526f"))},f=function(){return Promise.all([n.e("common/vendor"),n.e("components/page-component/app-vip-card/app-vip-card")]).then(n.bind(null,"19f0"))},_=function(){return n.e("components/page-component/app-goods-detail/app-name").then(n.bind(null,"1caa"))},b=function(){return n.e("components/page-component/app-quick-navigation/app-quick-navigation").then(n.bind(null,"4d92"))},v=function(){return n.e("components/page-component/goods/app-goods-full-reduce").then(n.bind(null,"6132"))},w=function(){return n.e("components/basic-component/app-close/app-close").then(n.bind(null,"f0dd"))},y=function(){return n.e("components/page-component/goods/bd-detail").then(n.bind(null,"3e70"))},O=function(){return n.e("components/page-component/goods/bd-comments").then(n.bind(null,"9470"))},$=function(){return n.e("components/page-component/goods/bd-kb").then(n.bind(null,"4c29"))},j=function(){return n.e("components/page-component/goods/bd-hc").then(n.bind(null,"de37"))},k=function(){return Promise.all([n.e("common/vendor"),n.e("components/page-component/goods/bd-coupon")]).then(n.bind(null,"11b2"))},T=function(){return n.e("components/page-component/goods/bd-xbc").then(n.bind(null,"8639"))},I=function(){return n.e("components/page-component/goods/bd-info-extra").then(n.bind(null,"c4b4"))},P={name:"detail",data:function(){return{showClose:!1,is_open:0,full_reduce:null,active:!0,attr_deposit:"0",attr_swell_deposit:"0",attr_stock:0,attr_price:"0",attr_price_member:0,url:"",level_show:0,loading:!1,select_attr_group:[],zhe:!1,list:[],num:1,shareShow:!1,attr_pic_url:"",goods_id:-1,d:0,h:0,m:0,s:0,end_time:-1,buttonDisabled:!1,poster_config:this.$api.advance.poster_config,poster_generate:this.$api.advance.poster_generate,goods:null}},onLoad:function(t){this.goods_id=t.id,wx.showShareMenu({menus:["shareAppMessage","shareTimeline"]})},onShow:function(){var e=this;this.showClose=!1,setTimeout(function(){e.showClose=!0}),this.$nextTick(function(){e.request_detail({id:e.goods_id}),e.$request({url:e.$api.advance.goods_list,data:{goods_id:e.goods_id}}).then(function(n){0===n.code?e.list=n.data.list:1===n.code&&t.showModal({title:"提示",content:n.msg})})})},onHide:function(){clearInterval(this.end_time)},onUnload:function(){clearInterval(this.end_time)},onShareAppMessage:function(){return this.hShareAppMessage()},methods:{hShareAppMessage:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.goods,n=e.app_share_title,o=e.name,i=e.id,a=e.app_share_pic,s=e.subtitle,r=e.pic_url;return this.$shareAppMessage({path:"/plugins/advance/detail/detail",title:n||o,imageUrl:a||r[0].pic_url,desc:s,params:{id:i}},t)},getMall:function(t){this.is_open=t.is_open},request_detail:function(e){var n=this;this.$request({url:this.$api.advance.detail,data:{id:e.id},method:"get"}).then(function(e){0===e.code?(n.goods=e.data.detail,n.goods.goods_activity&&(n.full_reduce=n.goods.goods_activity.full_reduce),n.goods.num=1,n.loading=!0,n.url="".concat(n.$api.advance.poster,"&goods_id=").concat(n.goods.id),n.getTime(n.goods.advanceGoods.end_prepayment_at),n.set_attr_active()):1===e.code&&(t.hideLoading(),t.showModal({content:e.msg,showCancel:!1,success:function(){t.navigateBack()}}))})},open_share:function(){this.shareShow=!0},change_num:function(t){this.num+=t},change_num_data:function(t){this.num=t},favorite:function(t){this.goods.favorite=t},select_attr:function(t){for(var e=t.data,n=t.item,o=this.goods.attr_groups,i=":",a=0,s=0;s<o.length;s++)for(var r=this.goods.attr_groups[s].attr_list,c=0;c<r.length;c++)o[s].attr_group_id===e&&r[c].attr_id===n?this.$set(this.goods.attr_groups[s].attr_list[c],"active",!0):o[s].attr_group_id===e&&r[c].attr_id!==n&&this.$set(this.goods.attr_groups[s].attr_list[c],"active",!1),this.goods.attr_groups[s].attr_list[c].active&&(a=this.goods.attr_groups[s].attr_list[c].attr_id,i+=":".concat(a));var d=i.substr(2);this.get_price_stock(d)},set_attr_active:function(){for(var t=0,e=":",n=0;n<this.goods.attr_groups.length;n++)for(var o=0;o<this.goods.attr_groups[n].attr_list.length;o++)0!==o?this.$set(this.goods.attr_groups[n].attr_list[o],"active",!1):0===o&&(t=this.goods.attr_groups[n].attr_list[o].attr_id,e+=":".concat(t),this.$set(this.goods.attr_groups[n].attr_list[o],"active",!0));this.get_price_stock(e.substr(2))},get_price_stock:function(t){for(var e=this.goods.attr,n=0;n<e.length;n++)if(e[n].sign_id===t){this.select_attr_group=e[n].attr_list;var o=e[n],i=o.deposit,a=o.swell_deposit,s=o.stock,r=o.price,c=o.price_member,d=o.pic_url;this.attr_deposit=i,this.attr_swell_deposit=a,this.attr_stock=s,this.attr_price=r,this.attr_price_member=c,this.attr_pic_url=d}0==this.attr_stock?this.buttonDisabled=!0:this.buttonDisabled=!1},close_attr:function(t){this.goods.buy_goods_auth?this.active=t:this.$tips.showToast({title:"您暂无权限购买该商品",icon:"none"})},getTime:function(t){var e=this,n=new Date(t.replace(/-/g,"/")).getTime()-(new Date).getTime();this.d=parseInt(n/1e3/60/60/24),this.h=parseInt(n/1e3/60/60%24),this.m=parseInt(n/1e3/60%60),this.s=parseInt(n/1e3%60),this.end_time=setInterval(function(){var n=(new Date).getTime(),o=new Date(t.replace(/-/g,"/")).getTime(),i=o-n;if(i>0){var a=parseInt(i/1e3/60/60/24),s=parseInt(i/1e3/60/60%24),r=parseInt(i/1e3/60%60),c=parseInt(i/1e3%60);e.d=a,e.h=s,e.m=r,e.s=c}else clearInterval(e.end_time)},1e3)},setCoupon:function(t){this.$set(this.goods.goods_coupon_center[t],"is_receive",1)}},components:{"app-goods-banner":r,"detail-ad":c,"detail-price-share":d,"detail-bottom-button":u,"detail-attr":p,"app-join-member":l,"app-related-suggestion-product":g,"detail-discount":h,"detail-vip":m,"app-name":_,"app-vip-card":f,"app-quick-navigation":b,appGoodsFullReduce:v,appClose:w,bdDetail:y,bdComments:O,bdKb:$,bdHc:j,bdCoupon:k,bdXbc:T,bdInfoExtra:I},computed:a({},(0,o.mapGetters)("mallConfig",{vip:"getVip",getTheme:"getTheme"}),{},(0,o.mapGetters)("user",{is_vip:"is_vip"}),{},(0,o.mapState)({mall:function(t){return t.mallConfig.mall}})),onShareTimeline:function(){var t=this.goods,e=t.app_share_title,n=t.name,o=t.id;return this.$shareTimeline({title:e||n,query:{id:o}})}};e.default=P}).call(this,n("543d")["default"])},"3ab6":function(t,e,n){"use strict";n.r(e);var o=n("15c3"),i=n("e0cd");for(var a in i)"default"!==a&&function(t){n.d(e,t,function(){return i[t]})}(a);n("4d64");var s=n("2877"),r=Object(s["a"])(i["default"],o["a"],o["b"],!1,null,"50b98c3f",null);e["default"]=r.exports},"4d64":function(t,e,n){"use strict";var o=n("f4a8"),i=n.n(o);i.a},ae58:function(t,e){t.exports=require("../siteinfo.js")},e0cd:function(t,e,n){"use strict";n.r(e);var o=n("3510"),i=n.n(o);for(var a in o)"default"!==a&&function(t){n.d(e,t,function(){return o[t]})}(a);e["default"]=i.a},f4a8:function(t,e,n){}},[["ba56","common/runtime","common/vendor"]]]);