(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/topic/list"],{"53a1":function(t,e,i){},"76db":function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=i("2f62");function r(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,n)}return i}function a(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?r(i,!0).forEach(function(e){o(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):r(i).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}function o(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var s=function(){return i.e("components/page-component/app-special-topic/app-special-topic-list").then(i.bind(null,"1bf2"))},c=1,u={},l=!1,f=!1,h={name:"list",components:{appSpecialTopicList:s},data:function(){return{list:[],typeList:[],tabCurrentIndex:0,KEY:"_TOPIC_SEARCH_DATA",historyList:[],keyword:"",isSearch:!1}},computed:a({},(0,n.mapState)({bar_title:function(t){return t.mallConfig.bar_title}}),{},(0,n.mapGetters)("mallConfig",{getTheme:"getTheme"})),watch:{keyword:{handler:function(t,e){t!==e&&(this.isSearch=!0)},immediate:!0}},onLoad:function(t){this.$commonLoad.onload(t),c=1,l=!1,f=!1,"undefined"!=typeof t.type&&(u.type=t.type),this.loadData(),this.loadType()},onReachBottom:function(){l||this.isSearch||this.loadData()},onShareAppMessage:function(){var t=this.$platDiff.route(),e="专题列表";for(var i in this.bar_title)if(this.bar_title[i].value==t){e=this.bar_title[i].new_name;break}return this.$shareAppMessage({title:e,path:"/pages/topic/list"})},methods:{historyClick:function(t){this.keyword=t.trim(),this.searchList()},setHistory:function(){var t=this.getHistory(),e=this.keyword.trim();e&&(t.forEach(function(i,n){i.keyword===e&&t.splice(n,1)}),t.unshift({keyword:e}),t.length>20&&t.pop(),this.historyList=t,this.$storage.setStorageSync(this.KEY,t))},getHistory:function(){var t=this.$storage.getStorageSync(this.KEY);return t||(t=[]),t},deleteHistory:function(){var e=this;t.showModal({content:"确认删除全部历史记录？",success:function(t){t.confirm&&(e.$storage.removeStorageSync(e.KEY),e.historyList=[])}})},clear:function(){t.hideKeyboard(),this.keyword=""},searchList:function(){c=1,this.keyword=this.keyword.trim(),this.loadData()},loadData:function(){var t=this;f||(this.$showLoading(),f=!0,u.page=c,this.setHistory(),this.$request({url:this.$api.topic.list,data:Object.assign({},{keyword:this.keyword},u)}).then(function(e){f=!1,t.isSearch=!1,t.historyList=t.getHistory(),t.$hideLoading(),0===e.code&&(1===c&&(t.list=[]),e.data.list.length>0?(t.list=t.list.concat(e.data.list),c++):l=!0)}).catch(function(e){t.$hideLoading(),f=!1}))},loadType:function(){var t=this;this.$request({url:this.$api.topic.type}).then(function(e){if(0===e.code&&e.data.list.length>0){var i=[{id:0,name:"全部"},{id:-1,name:"精选"}];for(var n in t.typeList=i.concat(e.data.list),t.typeList)if(t.typeList[n].id==u.type){t.tabCurrentIndex=n;break}}}).catch(function(t){f=!1})},tabClick:function(t){c=1,l=!1;var e=this.typeList[t].id;this.tabCurrentIndex=t,u={page:c,type:e},this.loadData()}}};e.default=h}).call(this,i("543d")["default"])},a965:function(t,e,i){"use strict";i.r(e);var n=i("76db"),r=i.n(n);for(var a in n)"default"!==a&&function(t){i.d(e,t,function(){return n[t]})}(a);e["default"]=r.a},b06a:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement;t._self._c},r=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return r})},b501:function(t,e,i){"use strict";i.r(e);var n=i("b06a"),r=i("a965");for(var a in r)"default"!==a&&function(t){i.d(e,t,function(){return r[t]})}(a);i("d955");var o=i("2877"),s=Object(o["a"])(r["default"],n["a"],n["b"],!1,null,"a7a27972",null);e["default"]=s.exports},d955:function(t,e,i){"use strict";var n=i("53a1"),r=i.n(n);r.a}},[["ca78","common/runtime","common/vendor"]]]);